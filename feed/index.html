<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>ze</title><link>/</link><description>The resolution will not change</description><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/avatar.png</url><title>ze</title><link>/</link></image><language>zh-CN</language><lastBuildDate>Thu, 31 Dec 2020 07:32:14 +0806</lastBuildDate><pubDate>Thu, 31 Dec 2020 07:32:14 +0806</pubDate><item><title>Swagger使用</title><link>/archives/Swagger使用/</link><description>&lt;h1&gt;参考&lt;/h1&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/u014231523/article/details/54562695"&gt;https://blog.csdn.net/u014231523/article/details/54562695&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://leongfeng.github.io/2017/02/20/springboot-springfox-swagger2markup-spring-restdoc/"&gt;https://leongfeng.github.io/2017/02/20/springboot-springfox-swagger2markup-spring-restdoc/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;官方wiki：&lt;a href="https://github.com/swagger-api/swagger-core/wiki/Annotations"&gt;https://github.com/swagger-api/swagger-core/wiki/Annotations&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h1&gt;引入依赖&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;&amp;lt;!--Swagger依赖--&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;io.springfox&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;springfox-swagger2&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.9.2&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;io.springfox&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;springfox-swagger-ui&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.9.2&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1&gt;配置SwaggerConfiguration&lt;/h1&gt;
&lt;p&gt;创建&lt;code&gt;SwaggerConfiguration.java&lt;/code&gt;配置类&lt;/p&gt;
&lt;p&gt;加注解&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;@Configuration&lt;/li&gt;
&lt;li&gt;@EnableSwagger2&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;com.pactera.sz.cmb202102.config&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;


&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;com.github.xiaoymin.swaggerbootstrapui.annotations.EnableSwaggerBootstrapUI&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;com.google.common.base.Function&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;com.google.common.base.Optional&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;com.google.common.base.Predicate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;com.google.common.base.Predicates&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.springframework.context.annotation.Bean&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.springframework.context.annotation.Configuration&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;springfox.documentation.RequestHandler&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;springfox.documentation.builders.ApiInfoBuilder&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;springfox.documentation.builders.PathSelectors&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;springfox.documentation.builders.RequestHandlerSelectors&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;springfox.documentation.service.ApiInfo&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;springfox.documentation.service.Contact&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;springfox.documentation.spi.DocumentationType&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;springfox.documentation.spring.web.plugins.Docket&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;springfox.documentation.swagger2.annotations.EnableSwagger2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;




&lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt; * @WebName: SwaggerConfig&lt;/span&gt;
&lt;span class="cm"&gt; * @Description: TODO&lt;/span&gt;
&lt;span class="cm"&gt; * @author: Chen Long&lt;/span&gt;
&lt;span class="cm"&gt; * @date: 2020/9/17  15:25&lt;/span&gt;
&lt;span class="cm"&gt; * “Welcome,my master”&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="nd"&gt;@Configuration&lt;/span&gt;
&lt;span class="nd"&gt;@EnableSwagger2&lt;/span&gt;
&lt;span class="nd"&gt;@EnableSwaggerBootstrapUI&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SwaggerConfig&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="c1"&gt;// 定义分隔符&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;SPLITOR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;project&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;com.pactera.sz.cmb202102.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;ChargeModule&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;com.pactera.sz.cmb202102.charge&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;householdServiceModule&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;com.pactera.sz.cmb202102.householdservice&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;financeServiceModule&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;com.pactera.sz.cmb202102.financeservice&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;statisticsServiceModule&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;com.pactera.sz.cmb202102.statisticsservice&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;managementModule&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;com.pactera.sz.cmb202102&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 创建API应用&lt;/span&gt;
&lt;span class="cm"&gt;     * api() 增加API相关信息&lt;/span&gt;
&lt;span class="cm"&gt;     * 通过select()函数返回一个ApiSelectorBuilder实例,用来控制哪些接口暴露给Swagger来展现，&lt;/span&gt;
&lt;span class="cm"&gt;     * 本例采用指定扫描的包路径来定义指定要建立API的目录。&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @return&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;



    &lt;span class="nd"&gt;@Bean&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Docket&lt;/span&gt; &lt;span class="nf"&gt;merchantDocket&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Docket&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DocumentationType&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SWAGGER_2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;groupName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;商户管理平台模块&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apiInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apiInfo&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;select&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apis&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scanBasePackage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ChargeModule&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;SPLITOR&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;householdServiceModule&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;SPLITOR&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;financeServiceModule&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;SPLITOR&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;statisticsServiceModule&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;paths&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PathSelectors&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;any&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;build&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

        &lt;span class="c1"&gt;//是否将参数显示在请求后面&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="nd"&gt;@Bean&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Docket&lt;/span&gt; &lt;span class="nf"&gt;systemDocket&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Docket&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DocumentationType&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SWAGGER_2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;groupName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;系统后台管理模块&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apiInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apiInfo&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;select&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apis&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scanBasePackage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;managementModule&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;paths&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PathSelectors&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;any&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;build&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;//是否将参数显示在请求后面&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;ApiInfo&lt;/span&gt; &lt;span class="nf"&gt;apiInfo&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ApiInfoBuilder&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;CMB202102-Swagger&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;description&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;CMB202102实训项目-后台管理系统/商户管理平台&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;termsOfServiceUrl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;localhost:8000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;contact&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Contact&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;WebSite&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;http://localhost:8081/login&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1138312802@qq.com&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;version&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Beta&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;license&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;MIT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;licenseUrl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;build&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 切割扫描的包生成Predicate&amp;lt;RequestHandler&amp;gt;&lt;/span&gt;
&lt;span class="cm"&gt;     * @param basePackage&lt;/span&gt;
&lt;span class="cm"&gt;     * @return&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Predicate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RequestHandler&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;scanBasePackage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;basePackage&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;basePackage&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
            &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;NullPointerException&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;basePackage不能为空，多个包扫描使用&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;SPLITOR&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;分隔&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;controllerPack&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;basePackage&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SPLITOR&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Predicate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RequestHandler&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;predicate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;controllerPack&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;strBasePackage&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;controllerPack&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;Predicate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RequestHandler&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;tempPredicate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RequestHandlerSelectors&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;basePackage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;strBasePackage&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;predicate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;predicate&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="n"&gt;tempPredicate&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Predicates&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;or&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tempPredicate&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;predicate&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;predicate&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
            &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;NullPointerException&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;basePackage配置不正确，多个包扫描使用&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;SPLITOR&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;分隔&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;predicate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;输入&lt;a href="http://localhost:8001/swagger-ui.html"&gt;http://localhost:8001/swagger-ui.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1651" data-height="795" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/f0e2c3b5c5e4a081fc645e8a65c25a1b.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;多包扫描&lt;/h2&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.jianshu.com/p/b5068f121a49"&gt;https://www.jianshu.com/p/b5068f121a49&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h1&gt;常用注解&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;注解&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;@Api()&lt;/td&gt;
&lt;td&gt;用于controller类上&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;@ApiOperation()&lt;/td&gt;
&lt;td&gt;用于controller类中的请求方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;@ApiParam()&lt;/td&gt;
&lt;td&gt;用于请求中的参数说明&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;@ApiImplicitParam()&lt;/td&gt;
&lt;td&gt;用于请求方法中的参数说明，不过写在请求方法上&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;@ApiImplicitParams()&lt;/td&gt;
&lt;td&gt;里面可以包含多个@ApiImplicitParam()&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;@ApiModel()&lt;/td&gt;
&lt;td&gt;写在实体类上，描述和重命名实体类&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;@ApiModelProperty()&lt;/td&gt;
&lt;td&gt;写在实体类属性上，描述，重命名，示例等&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;@ApiResponses()&lt;/td&gt;
&lt;td&gt;用于请求方法上，描述某个返回码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;@ApiIgnore()&lt;/td&gt;
&lt;td&gt;作用于类，方法，属性上，使其忽略&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;@Api()：描述Controller类&lt;/h2&gt;
&lt;p&gt;作用于&lt;code&gt;controller&lt;/code&gt;类上&lt;/p&gt;
&lt;p&gt;属性说明&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;属性&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;tags&lt;/td&gt;
&lt;td&gt;分组，在类上多个时会复制多个controller。也可以当做名字使用&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;description&lt;/td&gt;
&lt;td&gt;小标题描述，已弃用，默认为controller类名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;value&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;例如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@RestController&lt;/span&gt;
&lt;span class="nd"&gt;@RequestMapping&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;demoData&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nd"&gt;@Api&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Api_value&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Api_description&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;tags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Api_tags&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DemoDataController&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="556" data-height="197" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/1e4bfd864926938df8926625baba6153.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;@ApiOperation()：描述请求方法&lt;/h2&gt;
&lt;p&gt;作用于controller类中的&lt;code&gt;请求方法&lt;/code&gt;上&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;属性&lt;/th&gt;
&lt;th style="text-align:left"&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;value&lt;/td&gt;
&lt;td style="text-align:left"&gt;表示标题，如果有多个值则会复制多个controller&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;notes&lt;/td&gt;
&lt;td style="text-align:left"&gt;方法内容&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;tags&lt;/td&gt;
&lt;td style="text-align:left"&gt;分组&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;hidden&lt;/td&gt;
&lt;td style="text-align:left"&gt;默认为&lt;code&gt;false&lt;/code&gt;，&lt;code&gt;true&lt;/code&gt;时隐藏&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;例如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@GetMapping&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/exportExcel&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nd"&gt;@ApiOperation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ApiOperation_Value&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ApiOperation_Notes&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;exportExcel&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="489" data-height="124" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/db2a0302ba369e569d97155fe81d8e8b.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;@ApiParam()：参数&lt;/h2&gt;
&lt;p&gt;作用于controller类中的&lt;code&gt;请求方法形参上&lt;/code&gt;上。用于方法，参数，字段说明，表示对参数的添加元数据（说明或是否必填等）&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;注意，作用于参数时，在Swagger中会要求输入body类型(GET和HEAD无法接受BODY类型)。不想使用body可以在参数前加注解&lt;code&gt;@RequestParam&lt;/code&gt;。或者直接使用注解&lt;code&gt;@ApiImplicitParam()&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;属性&lt;/th&gt;
&lt;th style="text-align:left"&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;name&lt;/td&gt;
&lt;td style="text-align:left"&gt;参数名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;value&lt;/td&gt;
&lt;td style="text-align:left"&gt;参数说明&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;required&lt;/td&gt;
&lt;td style="text-align:left"&gt;是否必填&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;例如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;exportExcel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nd"&gt;@ApiParam&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;param&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ApiParam_value&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;required&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;param&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;

 &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;name&lt;/code&gt;可以省略&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1554" data-height="458" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/d01d538d585ec8b2d893bf7dfcd5479e.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;@ApiImplicitParams()&lt;/h2&gt;
&lt;p&gt;作用于&lt;code&gt;请求方法&lt;/code&gt;上，对参数进行说明，包含多个&lt;code&gt;@ApiImplicitParam&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/qq_35494342/article/details/104691636"&gt;https://blog.csdn.net/qq_35494342/article/details/104691636&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;@ApiImplicitParam&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;属性&lt;/th&gt;
&lt;th style="text-align:left"&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;name&lt;/td&gt;
&lt;td style="text-align:left"&gt;对应参数名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;value&lt;/td&gt;
&lt;td style="text-align:left"&gt;对参数进行说明&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;required&lt;/td&gt;
&lt;td style="text-align:left"&gt;参数是否必须传&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;paramType&lt;/td&gt;
&lt;td style="text-align:left"&gt;参数放在哪个地方，具体值在下方&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;dataType&lt;/td&gt;
&lt;td style="text-align:left"&gt;参数类型，默认String，其它值dataType="Integer"，也可以写实体类&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;dataTypeClass&lt;/td&gt;
&lt;td style="text-align:left"&gt;用类当做参数类型，但试过无效&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;defaultValue&lt;/td&gt;
&lt;td style="text-align:left"&gt;参数的默认值&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4&gt;paramType参数&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th style="text-align:left"&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;header&lt;/td&gt;
&lt;td style="text-align:left"&gt;请求参数的获取：@RequestHeader&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;query&lt;/td&gt;
&lt;td style="text-align:left"&gt;请求参数的获取：@RequestParam&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;path&lt;/td&gt;
&lt;td style="text-align:left"&gt;用于restful接口， 请求参数的获取：@PathVariable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;body&lt;/td&gt;
&lt;td style="text-align:left"&gt;@RequestBody&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;form&lt;/td&gt;
&lt;td style="text-align:left"&gt;表单&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;例如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@ApiImplicitParams&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
    &lt;span class="nd"&gt;@ApiImplicitParam&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;User&amp;#39;s name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;required&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dataType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;string&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;paramType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;query&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="nd"&gt;@ApiImplicitParam&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;email&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;User&amp;#39;s email&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;required&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dataType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;string&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;paramType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;query&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="nd"&gt;@ApiImplicitParam&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;User ID&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;required&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dataType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;long&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;paramType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;query&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;})&lt;/span&gt;
 &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;doPost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HttpServletRequest&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;HttpServletResponse&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ServletException&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="p"&gt;{...}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;@ApiModel()：实体类&lt;/h2&gt;
&lt;p&gt;作用于实体类上&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;属性&lt;/th&gt;
&lt;th style="text-align:left"&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;value&lt;/td&gt;
&lt;td style="text-align:left"&gt;实体类名称&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;description&lt;/td&gt;
&lt;td style="text-align:left"&gt;实体类描述&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;@ApiModelProperty：实体类参数上&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;属性&lt;/th&gt;
&lt;th style="text-align:left"&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;value&lt;/td&gt;
&lt;td style="text-align:left"&gt;参数描述&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;example&lt;/td&gt;
&lt;td style="text-align:left"&gt;举例&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;hidden&lt;/td&gt;
&lt;td style="text-align:left"&gt;是否显示&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;required&lt;/td&gt;
&lt;td style="text-align:left"&gt;是否必填&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;例如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@ApiModel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ApiModel_value&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;description&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ApiModel_description&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DemoData&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nd"&gt;@ApiModelProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;用户名id&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;required&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="388" data-height="242" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/836425449f542947caf0f979c7aec1bc.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;@ApiResponses：返回码描述&lt;/h2&gt;
&lt;p&gt;作用于请求方法。设置返回码和响应的描述信息，&lt;code&gt;@ApiResponses&lt;/code&gt;可以设置多个&lt;code&gt;@ApiResponse&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;例如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@ApiResponses&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
            &lt;span class="nd"&gt;@ApiResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;400&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Invalid ID supplied&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
            &lt;span class="nd"&gt;@ApiResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;404&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Pet not found&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
    &lt;span class="p"&gt;})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;@ApiIgnore：忽略类或方法或实体类属性&lt;/h2&gt;
&lt;p&gt;可作用于类，方法和实体类属性上&lt;/p&gt;
&lt;h1&gt;集成swagger-bootstrap-ui&lt;/h1&gt;
&lt;p&gt;功能更强大bootstrap风格的UI界面&lt;/p&gt;
&lt;h2&gt;导入依赖&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;!--&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//mvnrepository.com/artifact/com.github.xiaoymin/swagger-bootstrap-ui --&amp;gt;&lt;/span&gt;
        &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dependency&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;groupId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;xiaoymin&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;groupId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;artifactId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;swagger&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bootstrap&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ui&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;artifactId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mf"&gt;1.9.6&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;dependency&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;在SwaggerConfig上开启注解&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@EnableSwaggerBootstrapUI&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;访问网址&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://localhost:8000/doc.html"&gt;http://localhost:8000/doc.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1914" data-height="936" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/288cb1b1437f1c9637c86bf342e7ab02.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
</description><author>2826708201@qq.com (LifeAlsoIsGG)</author><guid isPermaLink="true">/archives/Swagger使用/</guid><pubDate>Sat, 10 Oct 2020 18:29:09 +0806</pubDate></item><item><title>Redis理论学习笔记</title><link>/archives/Redis理论学习笔记/</link><description>&lt;p&gt;Redis学习笔记&lt;/p&gt;
&lt;h1&gt;参考&lt;/h1&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;amp;mid=2247484858&amp;amp;idx=1&amp;amp;sn=8e222ea6115e0b69cac91af14d2caf36&amp;amp;chksm=cea24a71f9d5c367148dccec3d5ddecf5ecd8ea096b5c5ec32f22080e66ac3c343e99151c9e0&amp;amp;token=1082669959&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect"&gt;redis 总结——重构版&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/jasontec/p/9699242.html"&gt;https://www.cnblogs.com/jasontec/p/9699242.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Snailclimb/JavaGuide"&gt;https://github.com/Snailclimb/JavaGuide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://redisdoc.com/"&gt;Redis中文文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.bilibili.com/video/BV1S54y1R7SB"&gt;【狂神说Java】Redis最新超详细版教程通俗易懂&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h1&gt;简介&lt;/h1&gt;
&lt;p&gt;Redis的全称是&lt;code&gt;Remote Dictionary Server&lt;/code&gt;，即&lt;code&gt;远程字典服务&lt;/code&gt;。官方原话如下：&lt;/p&gt;
&lt;p&gt;Redis是一个开源(BSD许可)的,内存中的数据结构存储系统,它可以用作&lt;code&gt;数据库&lt;/code&gt;、&lt;code&gt;缓存&lt;/code&gt;和&lt;code&gt;消息中间件MQ&lt;/code&gt;。它支持多种类型的数据结构,如字符串( strings),散列( hashes),列表( lists),集合(sets),有序集合( sorted sets)与范围查询,bitmaps, hyperloglogs和地理空间( geospatial)索引半径查询。 Redis内置了复制( replication),LUA脚本(Luascripting),LRU驱动事件( LRU eviction),事务( transactions)和不同级别的磁盘持久化( persistence),并通过Reds哨兵( Sentinel)和自动分区( Cluster)提供高可用性( high availability)。&lt;/p&gt;
&lt;h2&gt;优点&lt;/h2&gt;
&lt;p&gt;因为是&lt;code&gt;纯内存&lt;/code&gt;操作, Redis的性能非常出色,每秒可以处理超过&lt;code&gt;10万次读写操作&lt;/code&gt;是已知性能最快的&lt;code&gt;Key- Value DB&lt;/code&gt;。Redis的出色之处不仅仅是性能, Redis最大的魅力是支持保存&lt;code&gt;多种数据结构&lt;/code&gt;,此外&lt;code&gt;单个value&lt;/code&gt;的最大限制是&lt;code&gt;1GB&lt;/code&gt;,不像 &lt;code&gt;memcached&lt;/code&gt;只能保存&lt;code&gt;1MB&lt;/code&gt;的数据,因此 Redis可以用来实现很多有用的功能。比方说用他的&lt;code&gt;Lst&lt;/code&gt;来做&lt;code&gt;FIFO双向链表&lt;/code&gt;,实现一个轻量级的高性能消息队列服务用他的Set可以做高性能的tag系统等等另外 Redis也可以对存入的&lt;code&gt;Key-Vaue&lt;/code&gt;设置&lt;code&gt;expire&lt;/code&gt;时间,因此也可以被当作一个功能加强版的 memcached来用。&lt;/p&gt;
&lt;h2&gt;缺点&lt;/h2&gt;
&lt;p&gt;Redis的主要缺点是&lt;code&gt;数据库容量&lt;/code&gt;受到&lt;code&gt;物理内存&lt;/code&gt;的限制,不能用作&lt;code&gt;海量数据的高性能读写&lt;/code&gt;,因此 Redis适合的场景主要局限在较小数据量的高性能操作和运算上。&lt;/p&gt;
&lt;p&gt;简单来说 redis 就是⼀个数据库，不过与传统数据库不同的是 redis 的数据是存在内存中的，所以读 写速度⾮常快，因此 redis 被⼴泛应⽤于缓存⽅向。另外，redis 也经常⽤来做&lt;code&gt;分布式锁&lt;/code&gt;。redis 提 供了多种数据类型来⽀持不同的业务场景。除此之外，redis ⽀持事务 、持久化、LUA脚本、LRU驱动 事件、多种集群⽅案。&lt;/p&gt;
&lt;h1&gt;为什么要用 redis /为什么要用缓存&lt;/h1&gt;
&lt;p&gt;主要从“&lt;code&gt;高性能&lt;/code&gt;”和“&lt;code&gt;高并发&lt;/code&gt;”这两点来看待这个问题。&lt;/p&gt;
&lt;h2&gt;高性能&lt;/h2&gt;
&lt;p&gt;假如用户第一次访问数据库中的某些数据。这个过程会比较慢，因为是从硬盘上读取的。将该用户访问的数据存在数缓存中，这样下一次再访问这些数据的时候就可以直接从缓存中获取了。操作缓存就是直接操作内存，所以速度相当快。如果数据库中的对应数据改变的之后，同步改变缓存中相应的数据即可！&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="729" data-height="469" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/6a09b66b66ab2e4e7f56d05a035372e6.webp" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;高并发&lt;/h2&gt;
&lt;p&gt;直接操作缓存能够承受的请求是远远大于直接访问数据库的，所以我们可以考虑把数据库中的部分数据转移到缓存中去，这样用户的一部分请求会直接到缓存这里而不用经过数据库。&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="554" data-height="469" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/5c917bb9d9fb7894344b3c1727d9e6ca.webp" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;为什么要⽤ redis ⽽不⽤ map/guava 做缓存?&lt;/h2&gt;
&lt;p&gt;缓存分为本地缓存和分布式缓存。以 Java 为例，使⽤⾃带的 map 或者 guava 实现的是本地缓存，最主要的特点是轻量以及快速，⽣命周期随着 jvm 的销毁⽽结束，并且在多实例的情况下，每个实例都 需要各⾃保存⼀份缓存，缓存不具有⼀致性。 使⽤ redis 或 memcached 之类的称为分布式缓存，在多实例的情况下，各实例共⽤⼀份缓存数据，缓 存具有⼀致性。缺点是需要保持 redis 或 memcached服务的⾼可⽤，整个程序架构上较为复杂。&lt;/p&gt;
&lt;h1&gt;redis 的线程模型&lt;/h1&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/m0_37524661/article/details/87086267"&gt;https://blog.csdn.net/m0_37524661/article/details/87086267&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://baijiahao.baidu.com/s?id=1666100733546359034&amp;amp;wfr=spider&amp;amp;for=pc"&gt;https://baijiahao.baidu.com/s?id=1666100733546359034&amp;amp;wfr=spider&amp;amp;for=pc&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1546" data-height="628" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/5b855bc48530fe0b28a14f7d0d7f613c.png" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;redis单线程模型指的是什么&lt;/h2&gt;
&lt;p&gt;Redis基于&lt;code&gt;Reactor&lt;/code&gt;模式开发了网络事件处理器，这个处理器被称为&lt;code&gt;文件事件处理器&lt;/code&gt;。它的组成结构为4部分：&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;多个套接字&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;IO多路复用程序&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;文件事件分派器&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;事件处理器&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;redis 内部使⽤⽂件事件处理器 &lt;code&gt;file event handler&lt;/code&gt; ，这个&lt;code&gt;⽂件事件处理器&lt;/code&gt;是&lt;code&gt;单线程&lt;/code&gt;的，所以 redis 才叫做&lt;code&gt;单线程模型&lt;/code&gt;。它采⽤ &lt;code&gt;IO 多路复⽤机&lt;/code&gt;制同时监听多个 &lt;code&gt;socket&lt;/code&gt;，根据 &lt;code&gt;socket&lt;/code&gt; 上的事件 来选择对应的事件处理器进⾏处理&lt;/p&gt;
&lt;p&gt;Redis客户端对服务端的每次调用都经历了&lt;code&gt;发送命令&lt;/code&gt;，&lt;code&gt;执行命令&lt;/code&gt;，&lt;code&gt;返回结果&lt;/code&gt;三个过程。其中执行命令阶段，由于Redis是&lt;code&gt;单线程&lt;/code&gt;来处理命令的，所有每一条到达服务端的命令不会立刻执行，所有的命令都会进入一个队列中，然后逐个被执行。并且多个客户端发送的命令的执行&lt;code&gt;顺序是不确定&lt;/code&gt;的。但是可以确定的是不会有两条命令被同时执行，不会产生并发问题，这就是Redis的单线程基本模型。&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;目前redis的网络处理方面时多线程，但是核心模块方面还是单线程&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;redis是单线程模型为什么效率还这么高？&lt;/h2&gt;
&lt;blockquote&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;纯内存访问&lt;/strong&gt;：数据存放在内存中，内存的响应时间大约是100纳秒，这是Redis每秒万亿级别访问的重要基础。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;非阻塞I/O&lt;/strong&gt;：Redis采用epoll做为I/O多路复用技术的实现，再加上Redis自身的事件处理模型将epoll中的连接，读写，关闭都转换为了时间，不在I/O上浪费过多的时间。&lt;/li&gt;
&lt;li&gt;单线程避免了线程切换和竞态产生的消耗。&lt;/li&gt;
&lt;li&gt;Redis采用单线程模型，每条命令执行如果占用大量时间，会造成其他线程阻塞，对于Redis这种高性能服务是致命的，所以Redis是面向高速执行的数据库&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2&gt;rector模式简介&lt;/h2&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/crazymakercircle/p/9833847.html"&gt;https://www.cnblogs.com/crazymakercircle/p/9833847.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;为什么网络处理要引入多线程？&lt;/h2&gt;
&lt;p&gt;之前的段落说了，Redis 的瓶颈并不在 CPU，而在&lt;code&gt;内存&lt;/code&gt;和&lt;code&gt;网络I/O&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;内存不够的话，可以加内存或者做数据结构优化和其他优化等，但网络的性能优化才是大头，网络 IO 的读写在 Redis 整个执行期间占用了大部分的 CPU 时间，如果把网络处理这部分做成多线程处理方式，那对整个 Redis 的性能会有很大的提升。&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="600" data-height="400" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/1bb687254efee437331a4cbe63980e5a.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="600" data-height="400" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/a01610012eec76c9bea5ec1a659e2e12.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1&gt;常⻅数据结构以及使⽤场景分析&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;数据结构&lt;/th&gt;
&lt;th&gt;常用命令&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;set,get,decr,incr,mget&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Hash&lt;/td&gt;
&lt;td&gt;hget,hset,hgetall&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;List&lt;/td&gt;
&lt;td&gt;lpush,rpush,lpop,rpop,lrange&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Set&lt;/td&gt;
&lt;td&gt;sadd,spop,smembers,sunion&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ZSet（Sorted Set）&lt;/td&gt;
&lt;td&gt;zadd,zrange,zrem,zcard&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;String&lt;/h2&gt;
&lt;blockquote&gt;&lt;p&gt;常⽤命令: set,get,decr,incr,mget 等。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;String数据结构是简单的key-value类型，value其实不仅可以是String，也可以是数字。 常规keyvalue缓存应⽤； 常规计数：微博数，粉丝数等。&lt;/p&gt;
&lt;p&gt;string类型是二进制安全的。意思是redis的string可以包含任何数据。比如jpg图片或者序列化的对象 。&lt;/p&gt;
&lt;h2&gt;Hash&lt;/h2&gt;
&lt;blockquote&gt;&lt;p&gt;常⽤命令： hget,hset,hgetall 等。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;hash 是⼀个 string 类型的 &lt;code&gt;field&lt;/code&gt; 和 &lt;code&gt;value&lt;/code&gt; 的映射表，hash 特别适合⽤于存储对象，后续操作的时 候，你可以直接仅仅修改这个对象中的某个字段的值。 ⽐如我们可以 hash 数据结构来存储⽤户信 息，商品信息等等。⽐如下⾯我就⽤ hash 类型存放了我本⼈的⼀些信息：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;key=JavaUser&lt;/span&gt;&lt;span class="mi"&gt;293847&lt;/span&gt;
&lt;span class="err"&gt;value=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
 &lt;span class="err"&gt;“id”&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
 &lt;span class="err"&gt;“&lt;/span&gt;&lt;span class="kc"&gt;na&lt;/span&gt;&lt;span class="err"&gt;me”&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;“S&lt;/span&gt;&lt;span class="kc"&gt;na&lt;/span&gt;&lt;span class="err"&gt;ilClimb”&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
 &lt;span class="err"&gt;“age”&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
 &lt;span class="err"&gt;“loca&lt;/span&gt;&lt;span class="kc"&gt;t&lt;/span&gt;&lt;span class="err"&gt;io&lt;/span&gt;&lt;span class="kc"&gt;n&lt;/span&gt;&lt;span class="err"&gt;”&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;“Wuha&lt;/span&gt;&lt;span class="kc"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="err"&gt;Hubei”&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;List&lt;/h2&gt;
&lt;blockquote&gt;&lt;p&gt;常⽤命令: lpush,rpush,lpop,rpop,lrange等&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Redis list 的实现为⼀个&lt;code&gt;双向链表&lt;/code&gt;。Redis list 的应⽤场景⾮常多，也是Redis最重要的数据结构之⼀，⽐如微博的关注 列表，粉丝列表，消息列表等功能都可以⽤Redis的 list 结构来实现。 Redis list 的实现为⼀个双向链表，即可以⽀持反向查找和遍历，更⽅便操作，不过带来了部分额外 的内存开销。 另外可以通过 lrange 命令，就是从某个元素开始读取多少个元素，可以基于 list 实现分⻚查询，这 个很棒的⼀个功能，基于 redis 实现简单的⾼性能分⻚，可以做类似微博那种下拉不断分⻚的东⻄ （⼀⻚⼀⻚的往下⾛），性能⾼。&lt;/p&gt;
&lt;p&gt;在 key 对应 list 的头部添加字符串元素&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;lpush&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在 key 对应 list 的尾部添加字符串元素&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;rpush&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;key 对应 list 中删除 count 个和 value 相同的元素&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;lrem&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;返回 key 对应 list 的长度&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;llen&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Set&lt;/h2&gt;
&lt;blockquote&gt;&lt;p&gt;常⽤命令： sadd,spop,smembers,sunion 等&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;set 对外提供的功能与list类似是⼀个列表的功能，特殊之处在于 set 是可以⾃动排重的。 当你需要存储⼀个列表数据，⼜不希望出现重复数据时，set是⼀个很好的选择，并且set提供了判断某 个成员是否在⼀个set集合内的重要接⼝，这个也是list所不能提供的。可以基于 set 轻易实现交集、 并集、差集的操作。 ⽐如：在微博应⽤中，可以将⼀个⽤户所有的关注⼈存在⼀个集合中，将其所有粉丝存在⼀个集合。 Redis可以⾮常⽅便的实现如共同关注、共同粉丝、共同喜好等功能。这个过程也就是求交集的过程， 具体命令如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;si&lt;/span&gt;&lt;span class="kc"&gt;nterst&lt;/span&gt;&lt;span class="err"&gt;ore&lt;/span&gt; &lt;span class="err"&gt;key&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="err"&gt;key&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="err"&gt;key&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="err"&gt;将交集存在key&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="err"&gt;内&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;ZSet（Sorted Set）&lt;/h2&gt;
&lt;blockquote&gt;&lt;p&gt;常⽤命令： zadd,zrange,zrem,zcard等&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;和set相⽐，sorted set增加了⼀个权重参数score，使得集合中的元素能够按score进⾏有序排列。 举例： 在直播系统中，实时排⾏信息包含直播间在线⽤户列表，各种礼物排⾏榜，弹幕消息（可以理 解为按消息维度的消息排⾏榜）等信息，适合使⽤ Redis 中的 Sorted Set 结构进⾏存储。&lt;/p&gt;
&lt;h1&gt;Redis过期时间&lt;/h1&gt;
&lt;p&gt;Redis中有个设置时间过期的功能，即对存储在 redis 数据库中的值可以设置⼀个过期时间。作为⼀个 缓存数据库，这是⾮常实⽤的。如我们⼀般项⽬中的 token 或者⼀些登录信息，尤其是短信验证码都 是有时间限制的，按照传统的数据库处理⽅式，⼀般都是⾃⼰判断过期，这样⽆疑会严重影响项⽬性 能。&lt;/p&gt;
&lt;p&gt;我们 set key 的时候，都可以给⼀个 &lt;code&gt;expire time&lt;/code&gt;，就是过期时间，通过过期时间我们可以指定这个 key 可以存活的时间。 也可以在运行时给存在的键设置剩余的生存时间，不设置则默认为&lt;code&gt;-1&lt;/code&gt;，设置为-1时表示&lt;code&gt;永久存储&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;如果假设你创建一个 &lt;code&gt;Timer&lt;/code&gt;，设置了⼀批 key 只能存活1个⼩时，那么接下来1⼩时后，redis是怎么对这批key进⾏删除 的？&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;定期删除&lt;/strong&gt;：redis默认是每隔 &lt;code&gt;100ms&lt;/code&gt; 就随机抽取⼀些设置了过期时间的key，检查其是否过期， 如果过期就删除。注意这⾥是随机抽取的。为什么要随机呢？你想⼀想假如 redis 存了⼏⼗万 个 key ，每隔100ms就遍历所有的设置过期时间的 key 的话，这时候需要的是Cpu处理能力，而不是内存，就会给 CPU 带来很⼤的负载！ &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;惰性删除&lt;/strong&gt; ：定期删除可能会导致很多过期 key 到了时间并没有被删除掉。所以就有了惰性删除。假如你的过期 key，靠定期删除没有被删除掉，还停留在内存⾥，除⾮你的系统去查⼀下那 个 key，才会被redis给删除掉。这就是所谓的惰性删除，也是够懒的哈！ 但是仅仅通过设置过期时间还是有问题的。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;但是仅仅通过设置过期时间还是有问题的。我们想⼀下：如果定期删除漏掉了很多过期 key，然后你也 没及时去查，也就没⾛惰性删除，此时会怎么样？如果⼤量过期key堆积在内存⾥，导致redis内存块耗 尽了。怎么解决这个问题呢？ redis 内存淘汰机制。&lt;/p&gt;
&lt;h1&gt;Redis内存淘汰机制&lt;/h1&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/weixin_43184769/article/details/90523923"&gt;https://blog.csdn.net/weixin_43184769/article/details/90523923&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/qq_28018283/article/details/80764518"&gt;https://blog.csdn.net/qq_28018283/article/details/80764518&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;配置文件： &lt;a href="http://download.redis.io/redis-stable/redis.conf"&gt;http://download.redis.io/redis-stable/redis.conf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;思考一下，如果定期删除漏掉了很多过期的key，而我们也没有再去访问它，如果不加处理，很可能导致内存耗尽。&lt;/p&gt;
&lt;p&gt;什么时候触发&lt;/p&gt;
&lt;p&gt;Redis配置文件中可以设置&lt;code&gt;maxmemory&lt;/code&gt;，内存的最大使用量，到达限度时会执行&lt;code&gt;内存淘汰机制&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;内存置换策略&lt;/h2&gt;
&lt;p&gt;没有配置时，&lt;code&gt;默认为no-eviction&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;名称&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;volatile-lru&lt;/td&gt;
&lt;td&gt;从&lt;code&gt;已设置过期时间的数据集&lt;/code&gt;中挑选&lt;code&gt;最近最少使用&lt;/code&gt;的数据淘汰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;volatile-lfu（4.0版本）&lt;/td&gt;
&lt;td&gt;从&lt;code&gt;已设置过期时间的数据集&lt;/code&gt;中挑选&lt;code&gt;最不经常&lt;/code&gt;使用的数据淘汰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;volatile-ttl&lt;/td&gt;
&lt;td&gt;从&lt;code&gt;已设置过期时间的数据集&lt;/code&gt;中挑选&lt;code&gt;将要过期&lt;/code&gt;的数据淘汰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;volatile-random&lt;/td&gt;
&lt;td&gt;从&lt;code&gt;已设置过期时间的数据集&lt;/code&gt;中挑选&lt;code&gt;任意数据&lt;/code&gt;淘汰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;allkeys-lru&lt;/td&gt;
&lt;td&gt;当&lt;code&gt;内存不足&lt;/code&gt;写入新数据时淘汰&lt;code&gt;最近最少&lt;/code&gt;使用的Key&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;allkeys-random&lt;/td&gt;
&lt;td&gt;当&lt;code&gt;内存不足&lt;/code&gt;写入新数据时&lt;code&gt;随机选择&lt;/code&gt;key淘汰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;allkeys-lfu（4.0版本）&lt;/td&gt;
&lt;td&gt;当&lt;code&gt;内存不足&lt;/code&gt;写入新数据时移除&lt;code&gt;最不经常使用&lt;/code&gt;的Key&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;no-eviction（禁止驱逐数据）&lt;/td&gt;
&lt;td&gt;当&lt;code&gt;内存不足&lt;/code&gt;写入新数据时，写入操作会报错，同时不删除数据&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;volatile为前缀的策略都是从已过期的数据集中进行淘汰。&lt;/li&gt;
&lt;li&gt;allkeys为前缀的策略都是面向所有key进行淘汰。&lt;/li&gt;
&lt;li&gt;LRU（least recently used）最少最近用到的。&lt;/li&gt;
&lt;li&gt;LFU（Least Frequently Used）最不常用的。&lt;/li&gt;
&lt;li&gt;TTL（Time To Live）&lt;/li&gt;
&lt;li&gt;它们的触发条件都是Redis使用的内存达到阈值时。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;淘汰机制的实现&lt;/h2&gt;
&lt;p&gt;既然是淘汰，那就需要把这些数据给删除，然后保存新的。Redis 删除失效主键的方法主要有两种：&lt;/p&gt;
&lt;h3&gt;消极方法( passive way)&lt;/h3&gt;
&lt;p&gt;在主键被访问时如果发现它已经失效,那么就删除它。 redis在实现&lt;code&gt;GET&lt;/code&gt;、&lt;code&gt;MGET&lt;/code&gt;、&lt;code&gt;HGET&lt;/code&gt;、 LRANGE等所有涉及到读取数据的命令时都会调&lt;code&gt;expirelfNeeded&lt;/code&gt;,它存在的意义就是在读取数据之前先检查一下它有没有失效,如果失效了就删除&lt;/p&gt;
&lt;p&gt;&lt;code&gt;expirelfNeeded&lt;/code&gt;函数中调用的另外一个函数 &lt;code&gt;propagateExpire&lt;/code&gt;,这个函数用来在正式删除&lt;code&gt;失效主键&lt;/code&gt;,并且&lt;code&gt;广播&lt;/code&gt;告诉其他地方,目的地有俩&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AOF&lt;/code&gt;文件,将删除失效主键的这一操作以 DEL Key的标准命令格式记录下来&lt;/li&gt;
&lt;li&gt;另一个就是发送到当前 Redis服务器的所有 &lt;code&gt;Slave&lt;/code&gt;,同样将删除失效主键的这操作以 &lt;code&gt;DEL Key&lt;/code&gt;的标准命令格式告知这些&lt;code&gt;Slave&lt;/code&gt;删除各自的失效主键&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;积极方法( active way)&lt;/h3&gt;
&lt;p&gt;周期性地探测,发现失效就删除。消极方法的缺点是,如果keγ迟迟不被访问,就会占用很多内存空间,所以才有积极方式&lt;/p&gt;
&lt;h3&gt;主动删除&lt;/h3&gt;
&lt;p&gt;当內存超过 &lt;code&gt;maxmemoryl&lt;/code&gt;限定时,触发主动清理策略,该策略由启动参数的配置决定&lt;/p&gt;
&lt;h1&gt;Redis持久化机制&lt;/h1&gt;
&lt;blockquote&gt;&lt;p&gt;怎么保证 redis 挂掉之后再重启数据可以进⾏恢复&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://baijiahao.baidu.com/s?id=1654694618189745916&amp;amp;wfr=spider&amp;amp;for=pc"&gt;https://baijiahao.baidu.com/s?id=1654694618189745916&amp;amp;wfr=spider&amp;amp;for=pc&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;很多时候我们需要持久化数据也就是将内存中的数据写⼊到硬盘⾥⾯，⼤部分原因是为了之后重⽤数据 （⽐如重启机器、机器故障之后恢复数据），或者是为了防⽌系统故障⽽将数据备份到⼀个远程位置。 Redis不同于Memcached的很重⼀点就是，Redis⽀持&lt;code&gt;持久化&lt;/code&gt;，⽽且⽀持两种不同的持久化操作。&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;RDB（Redis DataBase 快照）&lt;/li&gt;
&lt;li&gt;AOF（Append Only File）&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;RDB（Redis DataBase 快照）&lt;/h2&gt;
&lt;p&gt;Redis可以通过创建快照来获得存储在内存⾥⾯的数据在某个时间点上的副本。Redis创建快照之后，可 以对快照进⾏备份，可以将快照复制到其他服务器从⽽创建具有相同数据的服务器副本（Redis主从结 构，主要⽤来提⾼Redis性能），还可以将快照留在原地以便重启服务器的时候使⽤。&lt;/p&gt;
&lt;p&gt;优点&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;RDB文件紧凑，全量备份，非常适合用于进行备份和灾难恢复。&lt;/li&gt;
&lt;li&gt;在使用bgsave生成RDB文件的时候，redis主进程会fork()一个子进程来处理所有保存工作，主进程不需要进行任何磁盘IO操作。&lt;/li&gt;
&lt;li&gt;RDB 在恢复大数据集时的速度比 AOF 的恢复速度要快。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;缺点&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;RDB快照是一次&lt;code&gt;全量备份&lt;/code&gt;，存储的是内存数据的&lt;code&gt;二进制序列化&lt;/code&gt;形式，存储上非常紧凑。当进行快照持久化时，会开启一个子进程专门负责快照持久化，子进程会拥有父进程的&lt;code&gt;内存数据&lt;/code&gt;，父进程修改内存子进程&lt;code&gt;不会反应&lt;/code&gt;出来，所以在&lt;code&gt;快照持久化期间修改的数据不会被保存&lt;/code&gt;，可能丢失数据。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;快照持久化是Redis&lt;code&gt;默认采⽤&lt;/code&gt;的持久化⽅式,触发方式如下：&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;save&lt;/li&gt;
&lt;li&gt;bgsave&lt;/li&gt;
&lt;li&gt;自动化&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;触发方式：save&lt;/h3&gt;
&lt;p&gt;该命令会阻塞当前Redis服务器，执行save命令期间，Redis不能处理其他命令，直到RDB过程完成为止。具体流程如下：&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="640" data-height="356" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/070dee4a1e209b4a551e32762fec5b15.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;执行完成时候如果存在老的&lt;code&gt;RDB&lt;/code&gt;文件，就把新的替代掉旧的。我们的客户端可能都是几万或者是几十万，这种方式显然不可取。&lt;/p&gt;
&lt;h3&gt;触发方式：bgsave&lt;/h3&gt;
&lt;p&gt;执行该命令时，Redis会在后台&lt;code&gt;异步&lt;/code&gt;进行快照操作，快照同时还可以&lt;code&gt;响应客户端请求&lt;/code&gt;。具体流程如下：&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="640" data-height="337" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/76113d45a86cd56714ed45cc7d269887.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;具体操作是Redis进程执行&lt;code&gt;fork&lt;/code&gt;操作&lt;code&gt;创建子进程&lt;/code&gt;，RDB持久化过程由&lt;code&gt;子进程负责&lt;/code&gt;，完成后自动结束。阻塞只发生在&lt;code&gt;fork&lt;/code&gt;阶段，一般时间很短。基本上 Redis 内部所有的RDB操作都是采用 &lt;code&gt;bgsave&lt;/code&gt; 命令。&lt;/p&gt;
&lt;h3&gt;触发方式：自动触发&lt;/h3&gt;
&lt;p&gt;自动触发是由我们的配置文件来完成的。在&lt;code&gt;redis.conf&lt;/code&gt;配置文件中，里面有如下配置，我们可以去设置：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;①save&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这里是用来配置触发 Redis的 &lt;code&gt;RDB&lt;/code&gt; 持久化条件，也就是什么时候将内存中的数据保存到硬盘。比如“save m n”。表示m秒内数据集存在n次修改时，自动触发&lt;code&gt;bgsave&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;默认如下配置：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="n"&gt;在900秒&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="n"&gt;分钟&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;之后&lt;/span&gt;&lt;span class="err"&gt;，&lt;/span&gt;&lt;span class="n"&gt;如果&lt;/span&gt;&lt;span class="err"&gt;⾄&lt;/span&gt;&lt;span class="n"&gt;少有1个key发&lt;/span&gt;&lt;span class="err"&gt;⽣&lt;/span&gt;&lt;span class="n"&gt;变化&lt;/span&gt;&lt;span class="err"&gt;，&lt;/span&gt;&lt;span class="n"&gt;Redis就会&lt;/span&gt;&lt;span class="err"&gt;⾃&lt;/span&gt;&lt;span class="n"&gt;动触发BGSAVE命令创建快照&lt;/span&gt;&lt;span class="err"&gt;。&lt;/span&gt;
&lt;span class="n"&gt;save&lt;/span&gt; &lt;span class="mi"&gt;900&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; 

&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="n"&gt;在300秒&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="n"&gt;分钟&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;之后&lt;/span&gt;&lt;span class="err"&gt;，&lt;/span&gt;&lt;span class="n"&gt;如果&lt;/span&gt;&lt;span class="err"&gt;⾄&lt;/span&gt;&lt;span class="n"&gt;少有10个key发&lt;/span&gt;&lt;span class="err"&gt;⽣&lt;/span&gt;&lt;span class="n"&gt;变化&lt;/span&gt;&lt;span class="err"&gt;，&lt;/span&gt;&lt;span class="n"&gt;Redis就会&lt;/span&gt;&lt;span class="err"&gt;⾃&lt;/span&gt;&lt;span class="n"&gt;动触发BGSAVE命令创建快照&lt;/span&gt;&lt;span class="err"&gt;。&lt;/span&gt;
&lt;span class="n"&gt;save&lt;/span&gt; &lt;span class="mi"&gt;300&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; 

&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="n"&gt;在60秒&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;分钟&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;之后&lt;/span&gt;&lt;span class="err"&gt;，&lt;/span&gt;&lt;span class="n"&gt;如果&lt;/span&gt;&lt;span class="err"&gt;⾄&lt;/span&gt;&lt;span class="n"&gt;少有10000个key发&lt;/span&gt;&lt;span class="err"&gt;⽣&lt;/span&gt;&lt;span class="n"&gt;变化&lt;/span&gt;&lt;span class="err"&gt;，&lt;/span&gt;&lt;span class="n"&gt;Redis就会&lt;/span&gt;&lt;span class="err"&gt;⾃&lt;/span&gt;&lt;span class="n"&gt;动触发BGSAVE命令创建快照&lt;/span&gt;&lt;span class="err"&gt;。&lt;/span&gt;
&lt;span class="n"&gt;save&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="mi"&gt;10000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;②stop-writes-on-bgsave-error ：&lt;/strong&gt;默认值为yes。当启用了RDB且最后一次后台保存数据失败，Redis是否停止接收数据。这会让用户意识到数据没有正确持久化到磁盘上，否则没有人会注意到灾难（disaster）发生了。如果Redis重启了，那么又可以重新开始接收数据了&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;③rdbcompression ；&lt;/strong&gt;默认值是yes。对于存储到磁盘中的快照，可以设置是否进行压缩存储。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;④rdbchecksum ：&lt;/strong&gt;默认值是yes。在存储快照后，我们还可以让redis使用CRC64算法来进行数据校验，但是这样做会增加大约10%的性能消耗，如果希望获取到最大的性能提升，可以关闭此功能。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;⑤dbfilename ：&lt;/strong&gt;设置快照的文件名，默认是 dump.rdb&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;⑥dir：&lt;/strong&gt;设置快照文件的存放路径，这个配置项一定是个目录，而不能是文件名。&lt;/p&gt;
&lt;h3&gt;save和bgsave的区别&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="640" data-height="277" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/85ba179062e425e4a80283d1bcbd000e.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;AOF（Append Only File）&lt;/h2&gt;
&lt;p&gt;与&lt;code&gt;快照持久化&lt;/code&gt;相⽐，&lt;code&gt;AOF持久化&lt;/code&gt; 的&lt;code&gt;实时性&lt;/code&gt;更好，因此已成为主流的持久化⽅案。默认情况下Redis没有 开启&lt;code&gt;AOF（append only file）&lt;/code&gt;⽅式的持久化。&lt;/p&gt;
&lt;p&gt;可以通过&lt;code&gt;appendonly&lt;/code&gt;参数开启：&lt;/p&gt;
&lt;h3&gt;持久化原理&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="640" data-height="322" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/9f1bd6d7ebccedcffc5286d43fb7c0e0.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;每当有一个写命令过来时，就直接保存在我们的&lt;code&gt;AOF&lt;/code&gt;文件中。&lt;/p&gt;
&lt;h3&gt;文件重写原理&lt;/h3&gt;
&lt;p&gt;AOF的方式也同时带来了另一个问题。持久化文件会变的越来越大。为了压缩&lt;code&gt;AOF&lt;/code&gt;的持久化文件。redis提供了&lt;code&gt;bgrewriteaof&lt;/code&gt;命令。将内存中的数据以命令的方式保存到临时文件中，同时会&lt;code&gt;fork&lt;/code&gt;出一条&lt;code&gt;新进程&lt;/code&gt;来将文件重写。&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="640" data-height="286" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/1ee6baafe21dfd33aa375f440d4ee67d.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;重写&lt;code&gt;AOF&lt;/code&gt;文件的操作，并没有读取旧的&lt;code&gt;AOF&lt;/code&gt;文件，而是将整个内存中的数据库内容用命令的方式重写了一个&lt;code&gt;新的AOF文件&lt;/code&gt;，这点和&lt;code&gt;快照&lt;/code&gt;有点类似。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;appendonly&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;开启AOF持久化后每执⾏⼀条会更改Redis中的数据的命令，Redis就会将该命令通过&lt;code&gt;write&lt;/code&gt;写⼊硬盘中的&lt;code&gt;AOF&lt;/code&gt;⽂件，通俗的理解就是&lt;code&gt;日志记录&lt;/code&gt;。 &lt;code&gt;AOF&lt;/code&gt;⽂件的保存位置和&lt;code&gt;RDB&lt;/code&gt;⽂件的位置相同，都是通过&lt;code&gt;dir&lt;/code&gt;参数设置的，默认的⽂件名是 &lt;code&gt;appendonly.aof&lt;/code&gt;。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;appendfsync&lt;/span&gt; &lt;span class="n"&gt;always&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="n"&gt;每次有数据修改发&lt;/span&gt;&lt;span class="err"&gt;⽣&lt;/span&gt;&lt;span class="n"&gt;时都会写&lt;/span&gt;&lt;span class="err"&gt;⼊&lt;/span&gt;&lt;span class="n"&gt;AOF&lt;/span&gt;&lt;span class="err"&gt;⽂&lt;/span&gt;&lt;span class="n"&gt;件&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;这样会严重降低Redis的速度&lt;/span&gt;

&lt;span class="n"&gt;appendfsync&lt;/span&gt; &lt;span class="n"&gt;everysec&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="n"&gt;每秒钟同步&lt;/span&gt;&lt;span class="err"&gt;⼀&lt;/span&gt;&lt;span class="n"&gt;次&lt;/span&gt;&lt;span class="err"&gt;，&lt;/span&gt;&lt;span class="n"&gt;显示地将多个写命令同步到硬盘&lt;/span&gt;

&lt;span class="n"&gt;appendfsync&lt;/span&gt; &lt;span class="n"&gt;no&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="n"&gt;让操作系统决定何时进&lt;/span&gt;&lt;span class="err"&gt;⾏&lt;/span&gt;&lt;span class="n"&gt;同步&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;为了兼顾数据和写⼊性能，⽤户可以考虑 &lt;code&gt;appendfsync everysec&lt;/code&gt;选项 ，让Redis每秒同步⼀次AOF⽂ 件，Redis性能⼏乎没受到任何影响。⽽且这样即使出现系统崩溃，⽤户最多只会丢失⼀秒之内产⽣的 数据。当硬盘忙于执⾏写⼊操作的时候，Redis还会优雅的放慢⾃⼰的速度以便适应硬盘的最⼤写⼊速度。&lt;/p&gt;
&lt;h2&gt;Redis 4.0 对于持久化机制的优化&lt;/h2&gt;
&lt;p&gt;Redis 4.0 开始⽀持 &lt;code&gt;RDB&lt;/code&gt; 和 &lt;code&gt;AOF&lt;/code&gt; 的&lt;code&gt;混合持久化&lt;/code&gt;（默认关闭，可以通过配置项开启）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;aof&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;rdbpreamble&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如果把混合持久化打开，&lt;code&gt;AOF&lt;/code&gt; 重写的时候就直接把 &lt;code&gt;RDB&lt;/code&gt; 的内容写到 &lt;code&gt;AOF ⽂件开头&lt;/code&gt;。这样做的好处是可 以结合 &lt;code&gt;RDB&lt;/code&gt; 和 &lt;code&gt;AOF&lt;/code&gt; 的优点, 快速加载同时避免丢失过多的数据。当然缺点也是有的， &lt;code&gt;AOF&lt;/code&gt; ⾥⾯的 &lt;code&gt;RDB&lt;/code&gt; 部分是压缩格式不再是 &lt;code&gt;AOF&lt;/code&gt; 格式，可读性较差。&lt;/p&gt;
&lt;h1&gt;Redis事务&lt;/h1&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/redis/redis-transactions.html"&gt;https://www.runoob.com/redis/redis-transactions.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Redis 通过 &lt;code&gt;MULTI&lt;/code&gt;、&lt;code&gt;EXEC&lt;/code&gt;、&lt;code&gt;WATCH&lt;/code&gt; 等命令来实现&lt;code&gt;事务(transaction)&lt;/code&gt;功能。Redis 事务的本质是一组命令的集合。事务支持一次执行多个命令，一个事务中所有命令都会被序列化。在事务执行过程，会按照顺序串行化执行队列中的命令，其他客户端提交的命令请求不会插入到事务执行命令序列中。&lt;/p&gt;
&lt;h2&gt;特点&lt;/h2&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;Redis事务没有隔离级别的概念：批量操作在发送 &lt;code&gt;EXEC&lt;/code&gt; 命令前被放入队列缓存，并不会被实际执行，也就不存在事务内的查询要看到事务里的更新，事务外查询不能看到。&lt;/li&gt;
&lt;li&gt;Redis事务不保证原子性：Redis中，&lt;code&gt;单条命令是原子性执行的&lt;/code&gt;，但事务不保证&lt;code&gt;原子性&lt;/code&gt;，且没有回滚。事务中任意命令执行失败，其余的命令仍会被执行。&lt;/li&gt;
&lt;li&gt;在事务执行过程，其他客户端提交的命令请求不会插入到事务执行命令序列中。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;阶段&lt;/h2&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;开始事务。&lt;/li&gt;
&lt;li&gt;命令入队。&lt;/li&gt;
&lt;li&gt;执行事务。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;相关命令参考&lt;/h2&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/redis/redis-transactions.html"&gt;https://www.runoob.com/redis/redis-transactions.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h1&gt;缓存雪崩 | 缓存穿透 | 缓存击穿&lt;/h1&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/fanrenxiang/article/details/80542580"&gt;https://blog.csdn.net/fanrenxiang/article/details/80542580&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/xichji/p/11286443.html"&gt;https://www.cnblogs.com/xichji/p/11286443.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;缓存穿透&lt;/strong&gt;：key对应的数据在数据源并不存在，每次针对此key的请求从&lt;code&gt;缓存&lt;/code&gt;获取不到，请求都会到&lt;code&gt;数据源&lt;/code&gt;，从而可能&lt;code&gt;压垮数据源&lt;/code&gt;。举个例⼦：某个⿊客故意制造我们缓存中不存在的 key 发起⼤量请求，导致⼤量请 求落到数据库，若黑客利用此漏洞进行攻击可能压垮数据库。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;缓存击穿&lt;/strong&gt;：是指一个key非常热点，在不停的扛着大并发，大并发集中对这一个点进行访问，当这个&lt;code&gt;key&lt;/code&gt;在失效的瞬间，持续的大并发就穿破缓存，直接请求数据库，这个时候大并发的请求可能会瞬间把后端DB压垮，就像在一个屏障上凿开了一个洞。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;缓存雪崩&lt;/strong&gt;：当缓存服务器重启或者大量缓存集中在某一个时间段失效，这样在失效的时候，也会给后端系统(比如DB)带来很大压力，所以，后⾯的请求都会落到数据库上，造成数据库短时间内承受⼤量请求⽽崩掉。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;缓存穿透&lt;/h2&gt;
&lt;p&gt;缓存穿透说简单点就是⼤量请求的 key 根本不存在于缓存中，导致请求直接到了数据库上，根本没有 经过缓存这⼀层。举个例⼦：某个⿊客故意制造我们缓存中不存在的 key 发起⼤量请求，导致⼤量请 求落到数据库。&lt;/p&gt;
&lt;h3&gt;原理&lt;/h3&gt;
&lt;p&gt;正常缓存处理流程&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="772" data-height="790" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/e850c5479e8633d745652cb429297f9a.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;缓存穿透处理流程&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="738" data-height="787" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/17f07d5544e76b28c320f700c2f494d8.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;解决办法&lt;/h3&gt;
&lt;p&gt;一个一定不存在缓存及查询不到的数据，由于缓存是不命中时被动写的，并且出于容错考虑，如果从存储层查不到数据则不写入缓存，这将导致这个不存在的数据每次请求都要到存储层去查询，失去了缓存的意义。&lt;/p&gt;
&lt;p&gt;最基本的就是⾸先做好&lt;code&gt;参数校验&lt;/code&gt;，⼀些&lt;code&gt;不合法的参数&lt;/code&gt;请求直接抛出异常信息返回给客户端。⽐如查询的 数据库 id 不能⼩于 0、传⼊的邮箱格式不对的时候直接返回错误消息给客户端等等。&lt;/p&gt;
&lt;p&gt;如果一个查询返回的数据为空（不管是数据不存在，还是系统故障），我们仍然把这个空结果进行缓存，但它的过期时间会很短，最长不超过五分钟&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="nf"&gt;getObjectInclNullById&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
 &lt;span class="c1"&gt;// 从缓存中获取数据&lt;/span&gt;
 &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;cacheValue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
 &lt;span class="c1"&gt;// 缓存为空&lt;/span&gt;
 &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cacheValue&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
 &lt;span class="c1"&gt;// 从数据库中获取&lt;/span&gt;
 &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;storageValue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;storage&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
 &lt;span class="c1"&gt;// 缓存空对象&lt;/span&gt;
 &lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;storageValue&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
 &lt;span class="c1"&gt;// 如果存储数据为空，需要设置⼀个过期时间(300秒)&lt;/span&gt;
 &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;storageValue&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
 &lt;span class="c1"&gt;// 必须设置过期时间，否则有被攻击的⻛险&lt;/span&gt;
 &lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;expire&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
 &lt;span class="p"&gt;}&lt;/span&gt;
 &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;storageValue&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="p"&gt;}&lt;/span&gt;
 &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;cacheValue&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;布隆过滤器（bloom filter）&lt;/h3&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Snailclimb/JavaGuide/blob/master/docs/dataStructures-algorithms/data-structure/bloom-filter.md"&gt;https://github.com/Snailclimb/JavaGuide/blob/master/docs/dataStructures-algorithms/data-structure/bloom-filter.md&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;布隆过滤器是⼀个⾮常神奇的数据结构，通过它我们可以⾮常⽅便地判断⼀个给定数 据是否存在与海量数据中。我们需要的就是判断 &lt;code&gt;key&lt;/code&gt; 是否合法，有没有感觉布隆过滤器就是我们想要 找的那个“⼈”。具体是这样做的：把&lt;code&gt;所有可能存在的请求的值&lt;/code&gt;都存放在布隆过滤器中，当⽤户请求过来，我会先判断⽤户发来的请求的值是否存在于布隆过滤器中。不存在的话，直接返回请求参数错误信 息给客户端，存在的话才会⾛下⾯的流程。&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="757" data-height="934" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/cb0129d9bb302199a18c332e934edea3.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;缓存击穿&lt;/h2&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/chengege/p/11073166.html"&gt;https://www.cnblogs.com/chengege/p/11073166.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;key可能会在某些时间点被超高并发地访问，是一种非常“热点”的数据。这个时候，需要考虑一个问题：缓存被“击穿”的问题。&lt;/p&gt;
&lt;h3&gt;互斥锁(mutex key)&lt;/h3&gt;
&lt;p&gt;业界比较常用的做法，是使用&lt;code&gt;mutex&lt;/code&gt;。简单地来说，就是在缓存失效的时候（判断拿出来的值为空），不是立即去&lt;code&gt;load db&lt;/code&gt;，而是先使用缓存工具的某些带成功操作返回值的操作（比如&lt;code&gt;Redis&lt;/code&gt;的&lt;code&gt;SETNX&lt;/code&gt;或者&lt;code&gt;Memcache&lt;/code&gt;的&lt;code&gt;ADD&lt;/code&gt;）去&lt;code&gt;set&lt;/code&gt;一个&lt;code&gt;mutex key&lt;/code&gt;，当操作返回成功时，再进行&lt;code&gt;load db&lt;/code&gt;的操作并&lt;code&gt;回设缓存&lt;/code&gt;；否则，就重试整个&lt;code&gt;get&lt;/code&gt;缓存的方法。就是只让一个线程构建&lt;code&gt;缓存&lt;/code&gt;，其他线程等待构建缓存的线程执行完，重新从缓存获取数据就可以了。&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="384" data-height="336" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/c9f36956bf690cf2a3e9ab93779375af.png" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;缓存雪崩&lt;/h2&gt;
&lt;p&gt;简介：缓存同⼀时间⼤⾯积的失效，所以，后⾯的请求都会落到数据库上，造成数据库短时间内承受⼤ 量请求⽽崩掉。&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;事前：尽量保证整个 redis 集群的⾼可⽤性，发现机器宕机尽快补上。选择合适的内存淘汰策 略。 &lt;/li&gt;
&lt;li&gt;事中：本地ehcache缓存 + hystrix限流&amp;amp;降级，避免MySQL崩掉 &lt;/li&gt;
&lt;li&gt;事后：利⽤ redis 持久化机制保存的数据尽快恢复缓存&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;设置key永不失效（热点数据）；&lt;/li&gt;
&lt;li&gt;设置key缓存失效时候尽可能错开；&lt;/li&gt;
&lt;li&gt;使用多级缓存机制，比如同时使用redsi和memcache缓存，请求-&amp;gt;redis-&amp;gt;memcache-&amp;gt;db；&lt;/li&gt;
&lt;li&gt;购买第三方可靠性高的Redis云服务器；&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1482" data-height="921" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/3113f61e5fdcd5a4ec713c4c68ef7e95.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1&gt;如何解决 Redis 的并发竞争 Key 问题&lt;/h1&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.jianshu.com/p/41d3a673425d"&gt;https://www.jianshu.com/p/41d3a673425d&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/qq_42253147/article/details/94446727"&gt;https://blog.csdn.net/qq_42253147/article/details/94446727&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;这里的并发指的是多个redis的client同时set key引起的并发问题，也就是多个系统同时对⼀个 key 进⾏操作，但是最后执⾏的顺序 和我们期望的顺序不同，这样也就导致了结果的不同！&lt;/p&gt;
&lt;p&gt;方案&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;分布式锁+时间戳&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;消息队列MQ&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;分布式锁+时间戳&lt;/h2&gt;
&lt;h3&gt;如果对这个key操作，不要求顺序&lt;/h3&gt;
&lt;p&gt;这种情况下，准备一个分布式锁，大家去抢锁，抢到锁就做&lt;code&gt;set&lt;/code&gt;操作即可，比较简单。加锁的目的实际上就是把&lt;code&gt;并行读写&lt;/code&gt;改成&lt;code&gt;串行读写&lt;/code&gt;的方式，从而来避免资源竞争。&lt;/p&gt;
&lt;h3&gt;如果对这个key操作，要求顺序&lt;/h3&gt;
&lt;p&gt;假设有一个&lt;code&gt;key1&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;系统A需要将key1设置为valueA&lt;/li&gt;
&lt;li&gt;系统B需要将key1设置为valueB&lt;/li&gt;
&lt;li&gt;系统C需要将key1设置为valueC&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;期望按照key1的value值按照 &lt;code&gt;valueA–&amp;gt;valueB–&amp;gt;valueC&lt;/code&gt;的顺序变化。这种时候我们在数据写入数据库的时候，需要保存一个&lt;code&gt;时间戳&lt;/code&gt;。假设&lt;code&gt;时间戳&lt;/code&gt;如下&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;系统A key 1 {valueA 3:00}&lt;/li&gt;
&lt;li&gt;系统B key 1 {valueB 3:05}&lt;/li&gt;
&lt;li&gt;系统C key 1 {valueC 3:10}&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;那么，假设这会&lt;code&gt;系统B&lt;/code&gt;先抢到锁，将&lt;code&gt;key1&lt;/code&gt;设置为&lt;code&gt;{valueB 3:05}&lt;/code&gt;。接下来系统A抢到锁，发现自己的valueA的时间戳早于缓存中的时间戳，那就不做&lt;code&gt;set&lt;/code&gt;操作了。以此类推&lt;/p&gt;
&lt;h3&gt;什么是分布式锁&lt;/h3&gt;
&lt;p&gt;因为传统的加锁的做法（如java的synchronized和Lock）这里没用，只适合单点。因为这是分布式环境，需要的是分布式锁。&lt;/p&gt;
&lt;p&gt;当然，分布式锁可以基于很多种方式实现，比如zookeeper、redis等，&lt;/p&gt;
&lt;p&gt;不管哪种方式实现，基本原理是不变的：&lt;strong&gt;用一个状态值表示锁，对锁的占用和释放通过状态值来标识&lt;/strong&gt;。&lt;/p&gt;
&lt;h3&gt;分布式锁的实现&lt;/h3&gt;
&lt;p&gt;主要用到的redis函数是&lt;code&gt;setnx()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;利用&lt;code&gt;SETNX&lt;/code&gt;非常简单地实现&lt;code&gt;分布式锁&lt;/code&gt;。例如：某客户端要获得一个名字&lt;code&gt;youzhi&lt;/code&gt;的锁，客户端使用下面的命令进行获取：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;SETNX lock.youzhi&amp;lt;current Unix &lt;span class="nb"&gt;time&lt;/span&gt; + lock timeout + &lt;span class="m"&gt;1&lt;/span&gt;&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;如返回1，则该客户端获得锁，把&lt;code&gt;lock.youzhi&lt;/code&gt;的键值设置为时间值表示该键已被锁定，该客户端最后可以通过&lt;code&gt;DEL lock.foo&lt;/code&gt;来释放该锁。&lt;/li&gt;
&lt;li&gt;如返回0，表明该锁已被其他客户端取得，这时我们可以先返回或进行重试等对方完成或等待锁超时。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;消息队列&lt;/h2&gt;
&lt;p&gt;在并发量过大的情况下,可以通过&lt;code&gt;消息中间件&lt;/code&gt;进行处理,把&lt;code&gt;并行读写&lt;/code&gt;进行&lt;code&gt;串行化&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;把&lt;code&gt;Redis.set&lt;/code&gt;操作放在队列中使其串行化,必须的一个一个执行。&lt;/p&gt;
&lt;p&gt;这种方式在一些高并发的场景中算是一种通用的解决方案。&lt;/p&gt;
&lt;h1&gt;区别&lt;/h1&gt;
&lt;h2&gt;redis 和 memcached 的区别&lt;/h2&gt;
&lt;blockquote&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;redis⽀持更丰富的数据类型（⽀持更复杂的应⽤场景）&lt;/strong&gt;：Redis不仅仅⽀持简单的k/v类型的数 据，同时还提供list，set，zset，hash等数据结构的存储。memcache⽀持简单的数据类型， String。 &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Redis⽀持数据的持久化&lt;/strong&gt;：可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进⾏使 ⽤,⽽Memecache把数据全部存在内存之中。 &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;集群模式&lt;/strong&gt;：memcached没有原⽣的集群模式，需要依靠客户端来实现往集群中分⽚写⼊数据；但 是 redis ⽬前是原⽣⽀持 cluster 模式的. &lt;/li&gt;
&lt;li&gt;Memcached是多线程，⾮阻塞IO复⽤的⽹络模型；Redis使⽤单线程的多路 IO 复⽤模型。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1207" data-height="741" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/f67a0c75bb3b9fb63323c66f68e5f3cd.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
</description><author>2826708201@qq.com (LifeAlsoIsGG)</author><guid isPermaLink="true">/archives/Redis理论学习笔记/</guid><pubDate>Mon, 12 Oct 2020 20:45:07 +0806</pubDate></item><item><title>SQL学习笔记</title><link>/archives/SQL学习笔记/</link><description>&lt;h1&gt;参考&lt;/h1&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/mysql/mysql-tutorial.html"&gt;MYSQL菜鸟教程&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h1&gt;索引&lt;/h1&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/mysql/mysql-index.html"&gt;https://www.runoob.com/mysql/mysql-index.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/songzhixue/p/11160201.html"&gt;https://www.cnblogs.com/songzhixue/p/11160201.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;名称&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;普通索引&lt;/td&gt;
&lt;td&gt;普通索引&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;唯一索引&lt;/td&gt;
&lt;td&gt;不允许有俩行具有相同的值，允许空值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;主键索引&lt;/td&gt;
&lt;td&gt;为了保持数据库表与表之间的关系，不允许空值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;全文索引&lt;/td&gt;
&lt;td&gt;全文索引为在字符串数据中进行复杂的词搜索提供有效支持&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;创建表时&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="err"&gt;表名&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
  &lt;span class="err"&gt;字段名&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;  &lt;span class="err"&gt;数据类型&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="err"&gt;完整性约束条件…&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
  &lt;span class="err"&gt;字段名&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;  &lt;span class="err"&gt;数据类型&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="err"&gt;完整性约束条件…&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;UNIQUE&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;FULLTEXT&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;SPATIAL&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;   &lt;span class="k"&gt;INDEX&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="err"&gt;索引名&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;  &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;字段名&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="err"&gt;长度&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;ASC&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="k"&gt;DESC&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; 

&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;普通索引直接&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;INDEX&lt;/span&gt; &lt;span class="err"&gt;索引名&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="err"&gt;索引名&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;  &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;字段名&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="err"&gt;长度&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;ASC&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="k"&gt;DESC&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;主键索引标注索引时自动为主键索引&lt;/p&gt;
&lt;h2&gt;CREATE在已存在的表上创建索引&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;UNIQUE&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;FULLTEXT&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;SPATIAL&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;  &lt;span class="k"&gt;INDEX&lt;/span&gt;  &lt;span class="err"&gt;索引名&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="err"&gt;表名&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;字段名&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="err"&gt;长度&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;ASC&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="k"&gt;DESC&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;ALTER TABLE&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;ALTER&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="err"&gt;表名&lt;/span&gt; &lt;span class="k"&gt;ADD&lt;/span&gt;  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;UNIQUE&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;FULLTEXT&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;SPATIAL&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;INDEX&lt;/span&gt; &lt;span class="err"&gt;索引名&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;字段名&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="err"&gt;长度&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;ASC&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="k"&gt;DESC&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;删除索引&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;DROP&lt;/span&gt; &lt;span class="k"&gt;INDEX&lt;/span&gt; &lt;span class="err"&gt;索引名&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="err"&gt;表名字&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;删除主键索引&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;ALTER&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="err"&gt;表名&lt;/span&gt; &lt;span class="k"&gt;DROP&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;显示索引信息&lt;/h2&gt;
&lt;p&gt;你可以使用 SHOW INDEX 命令来列出表中的相关的索引信息。可以通过添加 \G 来格式化输出信息。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;SHOW&lt;/span&gt; &lt;span class="k"&gt;INDEX&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="k"&gt;table_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</description><author>2826708201@qq.com (LifeAlsoIsGG)</author><guid isPermaLink="true">/archives/SQL学习笔记/</guid><pubDate>Mon, 12 Oct 2020 20:47:17 +0806</pubDate></item><item><title>Java-JDK8新特性</title><link>/archives/Java-JDK8新特性/</link><description>&lt;p&gt;Java-JDK8新特性&lt;/p&gt;
</description><author>2826708201@qq.com (LifeAlsoIsGG)</author><guid isPermaLink="true">/archives/Java-JDK8新特性/</guid><pubDate>Thu, 15 Oct 2020 20:39:47 +0806</pubDate></item><item><title>Java-反射</title><link>/archives/Java-反射/</link><description>&lt;h1&gt;参考&lt;/h1&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/huangliniqng/article/details/88554510"&gt;https://blog.csdn.net/huangliniqng/article/details/88554510&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.jianshu.com/p/9be58ee20dee"&gt;https://www.jianshu.com/p/9be58ee20dee&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h1&gt;定义&lt;/h1&gt;
&lt;p&gt;JAVA反射机制是在运行状态中&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;对于任意一个类，都能够知道这个类的所有属性和方法；&lt;/li&gt;
&lt;li&gt;对于任意一个对象，都能够调用它的任意方法和属性；&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;这种动态获取信息以及动态调用对象方法的功能称为java语言的反射机制。&lt;/p&gt;
&lt;h1&gt;用途&lt;/h1&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.jianshu.com/p/3fd80b251399"&gt;https://www.jianshu.com/p/3fd80b251399&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;在日常的第三方应用开发过程中，经常会遇到某个类的某个成员变量、方法或是属性是私有的或是只对系统应用开放，这时候就可以利用Java的反射机制通过反射来获取所需的私有成员或是方法。当然，也不是所有的都适合反射，之前就遇到一个案例，通过反射得到的结果与预期不符。阅读源码发现，经过层层调用后在最终返回结果的地方对应用的权限进行了校验，对于没有权限的应用返回值是没有意义的缺省值，否则返回实际值起到保护用户的隐私目的。&lt;/p&gt;
&lt;h1&gt;反射机制的相关类&lt;/h1&gt;
&lt;p&gt;类名 用途   Class类 代表类的实体，在运行的Java应用程序中表示类和接口  Field类 代表类的成员变量（成员变量也称为类的属性）  Method类 代表类的方法  Constructor类 代表类的构造方法&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;类名&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;用途&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Class类&lt;/td&gt;
&lt;td&gt;代表类的实体，在运行的Java应用程序中表示类和接口&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Field类&lt;/td&gt;
&lt;td&gt;代表类的成员变量（成员变量也称为类的属性）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Method类&lt;/td&gt;
&lt;td&gt;代表类的方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Constructor类&lt;/td&gt;
&lt;td&gt;代表类的构造方法&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Class类&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://developer.android.google.cn/reference/java/lang/Class"&gt;Class&lt;/a&gt;代表类的实体，在运行的Java应用程序中表示类和接口。在这个类中提供了很多有用的方法，这里对他们简单的分类介绍。&lt;/p&gt;
&lt;h3&gt;例子&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="989" data-height="320" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/f063f379049e465c1d09cf81a58eeeda.png" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="595" data-height="197" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/bb4a69a23e08be3547dcecf64e2d2165.png" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="629" data-height="307" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/c998b904840a334ca800dbcb06c9ed71.png" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;获得类相关的方法&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;方法&lt;/th&gt;
&lt;th&gt;用途&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;asSubclass(Class&lt;U&gt; clazz)&lt;/td&gt;
&lt;td&gt;把传递的类的对象转换成代表其子类的对象&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Cast&lt;/td&gt;
&lt;td&gt;把对象转换成代表类或是接口的对象&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getClassLoader()&lt;/td&gt;
&lt;td&gt;获得类的加载器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getClasses()&lt;/td&gt;
&lt;td&gt;返回一个数组，数组中包含该类中所有公共类和接口类的对象&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getDeclaredClasses()&lt;/td&gt;
&lt;td&gt;返回一个数组，数组中包含该类中所有类和接口类的对象&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;forName(String className)&lt;/td&gt;
&lt;td&gt;根据类名返回类的对象&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getName()&lt;/td&gt;
&lt;td&gt;获得类的完整路径名字&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;newInstance()&lt;/td&gt;
&lt;td&gt;创建类的实例&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getPackage()&lt;/td&gt;
&lt;td&gt;获得类的包&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getSimpleName()&lt;/td&gt;
&lt;td&gt;获得类的名字&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getSuperclass()&lt;/td&gt;
&lt;td&gt;获得当前类继承的父类的名字&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getInterfaces()&lt;/td&gt;
&lt;td&gt;获得当前类实现的类或是接口&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;获得类中构造器相关的方法&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;方法&lt;/th&gt;
&lt;th&gt;用途&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;getConstructor(Class...&amp;lt;?&amp;gt; parameterTypes)&lt;/td&gt;
&lt;td&gt;获得该类中与参数类型匹配的公有构造方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getConstructors()&lt;/td&gt;
&lt;td&gt;获得该类的所有公有构造方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getDeclaredConstructor(Class...&amp;lt;?&amp;gt; parameterTypes)&lt;/td&gt;
&lt;td&gt;获得该类中与参数类型匹配的构造方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getDeclaredConstructors()&lt;/td&gt;
&lt;td&gt;获得该类所有构造方法&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;获得类中方法相关的方法&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;方法&lt;/th&gt;
&lt;th&gt;用途&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;getMethod(String name, Class...&amp;lt;?&amp;gt; parameterTypes)&lt;/td&gt;
&lt;td&gt;获得该类某个公有的方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getMethods()&lt;/td&gt;
&lt;td&gt;获得该类所有公有的方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getDeclaredMethod(String name, Class...&amp;lt;?&amp;gt; parameterTypes)&lt;/td&gt;
&lt;td&gt;获得该类某个方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;getDeclaredMethods()&lt;/td&gt;
&lt;td&gt;获得该类所有方法&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;类中其他重要的方法&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;方法&lt;/th&gt;
&lt;th&gt;用途&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;isAnnotation()&lt;/td&gt;
&lt;td&gt;如果是注解类型则返回true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;isAnnotationPresent(Class&amp;lt;? extends Annotation&amp;gt; annotationClass)&lt;/td&gt;
&lt;td&gt;如果是指定类型注解类型则返回true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;isAnonymousClass()&lt;/td&gt;
&lt;td&gt;如果是匿名类则返回true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;isArray()&lt;/td&gt;
&lt;td&gt;如果是一个数组类则返回true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;isEnum()&lt;/td&gt;
&lt;td&gt;如果是枚举类则返回true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;isInstance(Object obj)&lt;/td&gt;
&lt;td&gt;如果obj是该类的实例则返回true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;isInterface()&lt;/td&gt;
&lt;td&gt;如果是接口类则返回true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;isLocalClass()&lt;/td&gt;
&lt;td&gt;如果是局部类则返回true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;isMemberClass()&lt;/td&gt;
&lt;td&gt;如果是内部类则返回true&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Field类&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://developer.android.google.cn/reference/java/lang/reflect/Field"&gt;Field&lt;/a&gt;代表类的成员变量（成员变量也称为类的属性）。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;方法&lt;/th&gt;
&lt;th&gt;用途&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;equals(Object obj)&lt;/td&gt;
&lt;td&gt;属性与obj相等则返回true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;get(Object obj)&lt;/td&gt;
&lt;td&gt;获得obj中对应的属性值&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;set(Object obj, Object value)&lt;/td&gt;
&lt;td&gt;设置obj中对应属性值&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Method类&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://developer.android.google.cn/reference/java/lang/reflect/Method"&gt;Method&lt;/a&gt;代表类的方法。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;方法&lt;/th&gt;
&lt;th&gt;用途&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;invoke(Object obj, Object... args)&lt;/td&gt;
&lt;td&gt;传递object对象及参数调用该对象对应的方法&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="926" data-height="453" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/ef650e5fa57afdb23f7be587d0e65472.png" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="757" data-height="310" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/c27cd26f373d6b8fc48e87289848345d.png" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;Constructor类&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://developer.android.google.cn/reference/java/lang/reflect/Constructor"&gt;Constructor&lt;/a&gt;代表类的构造方法。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th&gt;方法&lt;/th&gt;
&lt;th&gt;用途&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;newInstance(Object... initargs)&lt;/td&gt;
&lt;td&gt;根据传递的参数创建类的对象&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</description><author>2826708201@qq.com (LifeAlsoIsGG)</author><guid isPermaLink="true">/archives/Java-反射/</guid><pubDate>Fri, 16 Oct 2020 16:49:15 +0806</pubDate></item><item><title>腾讯云学习笔记</title><link>/archives/腾讯云学习笔记/</link><description>&lt;h1&gt;学习目录&lt;/h1&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="https://main.qcloudimg.com/raw/1c7701b98daad4d66b7ab7039cd8ff6a/腾讯云从业者认证-知识点列表V1.0.pdf"&gt;知识点目录1.0&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="https://main.qcloudimg.com/raw/84235eeb1c66575eb7fa536e88b0934f/腾讯云从业者认证-知识点列表V1.2.pdf"&gt;知识点目录1.2&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1561" data-height="818" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/7fb7d1214526fc6fa168ca53729368f6.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1&gt;1. 云计算基础介绍&lt;/h1&gt;
&lt;h2&gt;1.1 企业自定EDC&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1710" data-height="923" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/ea19e18e4f66cb412f4734e67bd34538.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;数据中心等级&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1689" data-height="907" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/737e29bcdc399fd4c3eb358299cb736d.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.2 IDC托管/租用&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Internet Data Center&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1671" data-height="944" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/7bbd9060a212487a9d1ed4efeba78876.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.3 云计算对比&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1621" data-height="950" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/e68d1a01f94b0a05acb08e59ba5ecd3c.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.4 什么是云计算&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1704" data-height="921" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/5ca845aeed57568db53b5997c99a5174.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.5 云计算参考模型&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1648" data-height="930" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/d585cf6d026aed2937a5983ece993262.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.6 云计算关键特点/特征&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1614" data-height="858" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/b3154a6ba916b2459427930be0f55b16.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.7 云计算服务模式/云层次&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1642" data-height="946" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/45234ec16f3fc050e42e0e28b83d53dd.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;云计算技术架构&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1623" data-height="918" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/2c8cc005d86c87687f2508c5fc4c003c.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.8 云计算四种部署方式&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1575" data-height="847" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/9b16f0f3d3fb7b3066087c85c6d2b960.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;1.8.1 公有云和私有云区别&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1632" data-height="907" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/5d6915508a8b0a1549a49ccf98ce515d.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;1.8.2 混合云&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1616" data-height="921" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/b7db25646e42ecf5fa90e829e290c919.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;1.8.3 行业云&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1680" data-height="882" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/26455ffde9bf64367c0a13b629b9e1cd.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.9 云计算关键技术&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1224" data-height="670" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/7fe14040d4dd9ecefac934baec5a5cee.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;计算虚拟化原理&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1636" data-height="885" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/a2b8ca4bf47e5efe92d39414c7d62501.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;计算虚拟化分类&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1699" data-height="914" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/2567d61d11cd8c0a5bb8d0c0773e7577.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;计算虚拟化对比&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1719" data-height="945" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/9c8369563dac30670715f22fe9f10619.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;计算虚拟化-KVM&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;KVM&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1660" data-height="870" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/e8bc923bf7ccd817cae5cd756dd6a425.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.10 分布式存储&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1725" data-height="918" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/8ac876007fd4ccbb9ab7107e6bc381e3.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.11 网络虚拟化-SDN&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1678" data-height="906" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/5a8bdeb6438b0cadc18376b6cb0ec205.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;SDN与NFV对比&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;SDN&lt;/code&gt; &lt;code&gt;NFV&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1775" data-height="900" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/0fdcf46e69e0eb4d5d720649ee9d1d48.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.12 云管理平台OpenStack&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;OpenStack&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1663" data-height="877" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/c3fedf88bf932c2394f0f1179cb6f453.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;腾讯云管理平台VStation&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;VStation&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1491" data-height="888" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/17d2a9734b7c14216deef2ff9b7b2d84.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;腾讯云VStation架构&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;VStation架构&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1680" data-height="857" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/0929c6f672ca89cf5120de866ddd4c4c.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;OpenStack对比VStation&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1494" data-height="840" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/20623182e54476325e6ae9b08fb1a3b4.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.13 应用虚拟化-容器技术&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1615" data-height="927" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/79ea5c4e6a858954322774a44f5d457a.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;应用虚拟化-容器技术-Docker&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Docker&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1724" data-height="884" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/a5598432e5471e19b9471f8be76a9640.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.14 大数据&amp;amp;人工智能&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1646" data-height="916" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/3e4b5fd087d5d17ded8eda1df233cb92.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.15 云计算影响与市场&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1219" data-height="642" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/50964323cb23c0e66d6ba01cd2007cd6.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云计算发展阶段&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1729" data-height="811" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/f172d264a7b8d703a33bd0ccff6f73bc.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云计算产业影响&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1619" data-height="908" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/5f85cadbcc9b56399e037726199beaac.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1591" data-height="928" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/9079cbe037142108a73902dfb1ebb052.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1504" data-height="924" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/b1a02d69eac5b06eab0591f60b68c479.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云计算组织影响-客户&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1562" data-height="804" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/9efc97d02e0ca31037dafc6ce0aed201.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云计算组织影响-厂商&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1634" data-height="915" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/9eec09a50d2e12ec57246ef29facd62b.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;1.16 腾讯云发展与优势&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1204" data-height="666" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/d6fdc6aaacaf1aaa2398d100eec8f3f2.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;腾讯云发展阶段&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1600" data-height="928" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/106a8cb4f7409b369c18be71e469ea82.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;腾讯云竞争优势&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1698" data-height="766" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/9a1c938a6410747563462e549a61fd7e.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;腾讯云登上KVM全球贡献榜&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1684" data-height="941" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/92d461673d1d9f68732679f5ceaec141.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;云计算基础课程总结&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1646" data-height="854" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/82de4b4d022affc7488e473ad87e907c.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1&gt;2. 腾讯云服务器产品介绍&lt;/h1&gt;
&lt;h2&gt;2.1 云服务器基础知识&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1256" data-height="814" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/9c40785d87b151e1a4cf46b4ef7c6d33.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;地域与可用区&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="-1" data-height="-1" src="images/腾讯云学习笔记/2.1地域与可用区.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1638" data-height="644" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/19835263e5e56cfc57f92b58d9d4a306.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云服务器实例&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1712" data-height="885" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/bf296ef7ec9004d4d0c05d0157ddb9ab.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;云服务器实例系列&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1683" data-height="914" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/3bf076dce8873902dbb2ce1a34341c22.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;云服务器实例类型&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1740" data-height="946" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/a678326d8d28408927ed7fb65db2291b.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;实例类型特点与应用&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1692" data-height="885" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/592198cb2069290393aa1e9c7e759550.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云服务器镜像&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1732" data-height="957" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/6148491a1ed87abfb743bfefe6fcc40f.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;镜像类型与优势&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1667" data-height="913" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/545481a2123ed591447d563ceb553eb5.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云服务器存储&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1603" data-height="949" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/8643dd3f411c861a3e859767bac1478f.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云服务器演进&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1588" data-height="926" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/66fcc6091be8096b9d873aae2389b7ff.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;2.2 云服务器产品介绍&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;CVM&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1121" data-height="743" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/d318028158ab590e36eb31d9a17d74ea.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云服务器CVM&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1691" data-height="915" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/54cbdafba5824eaa499a5ef6f6fe1bff.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云服务器CVM应用&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1701" data-height="749" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/dec0b3f0b5a0b904a5c041016e609858.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;GPU云服务器&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;GPU&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1657" data-height="932" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/a6fca6a3b5cb8a531f2573dde76f271f.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;GPU云服务器类型和应用&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1551" data-height="929" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/9c96eeaba082c0d6e739c63e36522d42.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1691" data-height="835" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/cea7aafb31b8f5781da6a9caaacc66a2.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;FPGA云服务器&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1665" data-height="898" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/66da2d0c8a895ff028f938a0eda9b7aa.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;FPGA云服务器优势与应用&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1565" data-height="933" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/639ab079b3394e56dec9d5c40d3029ba.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;专用宿主机CDH&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;CDH&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1656" data-height="896" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/dd5fe499aed8b997977efb138f03ccaa.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1636" data-height="933" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/046f35d2ee13a8c27f7b0b73faceff9c.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;黑石服务器CPM&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;CPM&lt;/code&gt; &lt;code&gt;黑石&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1637" data-height="678" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/c47c55432a2da8a5388607e0345ca2d6.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;黑石Stack-V应用混合云&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Stack-V&lt;/code&gt; &lt;code&gt;黑石&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1598" data-height="928" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/d6e16e84c17c5ede7c7fc3d9797d2034.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;黑石ARM应用移动游戏场景&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ARM&lt;/code&gt; &lt;code&gt;黑石&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1679" data-height="858" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/6cf84f6fe60dc406da30d0a67c181d5d.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;黑石OpenPOWER应用大数据&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;OpenPOWER&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1646" data-height="925" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/5b2994cc849b38784245fbe61cb676f1.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;2.3 云服务计费方案&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1202" data-height="569" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/53977f9cad09edf9af9fc2d879462e0a.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云服务计费模式&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1591" data-height="748" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/61e99304a8ff6c2759705be54e5436bc.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1664" data-height="798" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/0eac7bd60c4388ba51455c0edca8940e.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;报包年包月计费&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1608" data-height="887" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/8e261599bb34cf18ce743bd1bf6c2c43.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;包年包月停服回收机制&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1663" data-height="922" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/4ee307e6fea76543907a7c2a2905af05.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;按量计费模式&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1590" data-height="881" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/9d8deb2cc23f5c1de1643a497467612c.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;按量计费冻结机制&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1623" data-height="941" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/a7982f27130e3f8e023b671a255c31ca.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;按量计费停服回收机制&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1695" data-height="930" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/eb57aa39fdf111685573d5f21e712f81.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云服务计费方案&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;CVM&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1412" data-height="787" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/3aacb1a0e06698cdae20d62cf67b6efb.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1688" data-height="861" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/e05f78d42654ae7dfb960f9b78bae682.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1661" data-height="815" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/8384672eef9f1d0ec2bc5ade863682b2.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;CVM示例购买限额&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1627" data-height="867" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/943953500c10b2c5cbc96df7f31d11bf.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;思考题&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1652" data-height="356" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/ddd81e0829c49a0c199e38fbd8190011.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;2.4 课程总结&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1392" data-height="416" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/0a7005ae9ea164836eca3b2f273408ad.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1&gt;3. 腾讯云网络产品&lt;/h1&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="987" data-height="589" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/d526f24ea99be14fed48a1837b902060.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;3.1 腾讯云私有网络VPC&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;VPC&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1263" data-height="823" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/b90cc60ae0a0cfef142031e727df154b.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;私有网络VPC&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;VPC&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1619" data-height="870" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/f941ea55ebf9a803ca628ffd4fa388d8.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;VPC私有网段&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1693" data-height="870" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/e0df739336e0afaae6f60ac682361b80.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1661" data-height="888" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/a57d76fe5d82c7f2552304129b8276ac.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;VPC路由表&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1726" data-height="906" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/a80f0ab51544cc7afba66df708866ce3.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;安全组与网络ACL&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ACL&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1683" data-height="868" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/057ae552fd05fb3b2121b4c6a3620b19.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;VPC访问控制&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1700" data-height="928" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/91481b783fd1ad55615aaffb706cdb96.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;弹性网卡ENI&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ENI&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1688" data-height="841" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/51674a8bb1ea281d0f9b41464dc054d1.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;3.2 腾讯云网络连接产品&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1172" data-height="837" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/48a5d3acd19dd3a2c2a7bffddaba37a7.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;网络连接服务&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1542" data-height="921" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/55d55472fdfb22a39a22a401eb433d29.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;公网接入&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;NAT&lt;/code&gt; &lt;code&gt;公网网关&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;弹性IP&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1676" data-height="819" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/852a587042886c28e688fc6058a10988.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;公网网关&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1653" data-height="960" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/a876c87434f1c2341a3fb79fce87858b.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;NAT网关&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1682" data-height="904" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/00520e8097c2ebeac686cbeaec760e87.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;NAT对比公网网关&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1627" data-height="938" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/8612920a0cc7e79b0781e13a61360513.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;企业DC连接&lt;/h3&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="176" data-height="79" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/4e02a6a831cb34f8c7845016bd245f34.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;VPN连接&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1649" data-height="958" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/05b34009f25a942706b40e9e5ba5be83.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;专线接入对比VPN连接&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1665" data-height="921" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/648dfd964954728ebafad53db19cb3c9.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;对等连接&lt;/h3&gt;
&lt;p&gt;对等连接&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1635" data-height="936" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/be28bdd52d437d2ceb6e2b0d0d7b30c0.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;对等连接限制&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1676" data-height="870" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/e19606aac0d1a6c6cae97337ce51a809.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;对等连接对比&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1682" data-height="896" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/85906d142f4604df8bc873ea3ff8390e.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;云联网&lt;/h3&gt;
&lt;h1&gt;4. 腾讯云CDN加速&lt;/h1&gt;
&lt;h1&gt;题目笔记&lt;/h1&gt;
&lt;h2&gt;云计算基础&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1128" data-height="646" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/ef7b80b1ee5438394e93c0691353c493.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;腾讯云机房的达标等级&lt;/h3&gt;
&lt;p&gt;必须在DC等级&lt;code&gt;T3&lt;/code&gt;以上&lt;/p&gt;
&lt;h3&gt;传统IDC两种类型的区别&lt;/h3&gt;
&lt;p&gt;托管型租用型&lt;/p&gt;
&lt;h2&gt;云服务器产品&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1160" data-height="881" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/ccc3b9cf428115b850ee373959d86164.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1168" data-height="98" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/60a960204a95678c4fc0197f629689e9.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;腾讯云网络产品&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1165" data-height="866" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/b05f412bd3d82f92933d4b116b5d3fe5.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;腾讯云CDN加速产品&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1163" data-height="592" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/ab5d406bd5d605173ee7f4a67feb72de.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1162" data-height="344" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/96ea8572e018c92f88d0f111f7581039.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;腾讯云云存储产品&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="814" data-height="774" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/b3a1a8aa72f6341b1eaf96c66337f475.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;腾讯云数据库产品&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1276" data-height="917" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/99fe864d3997546e67b498e5fa0d443a.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;腾讯云安全产品&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1277" data-height="776" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/efd77e28eaf03af28b899968faa5b352.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1276" data-height="490" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/304883b4bd818655f9add3bbad6bc57f.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
</description><author>2826708201@qq.com (LifeAlsoIsGG)</author><guid isPermaLink="true">/archives/腾讯云学习笔记/</guid><pubDate>Tue, 20 Oct 2020 16:12:14 +0806</pubDate></item><item><title>Java-时间处理</title><link>/archives/Java-时间处理/</link><description>&lt;p&gt;Java-时间处理&lt;/p&gt;
</description><author>2826708201@qq.com (LifeAlsoIsGG)</author><guid isPermaLink="true">/archives/Java-时间处理/</guid><pubDate>Wed, 04 Nov 2020 17:31:40 +0806</pubDate></item><item><title>Redis实现单点登录</title><link>/archives/Redis实现单点登录/</link><description>&lt;p&gt;Redis实现单点登录&lt;/p&gt;
&lt;h1&gt;参考&lt;/h1&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/qq_32534441/article/details/90264485"&gt;https://blog.csdn.net/qq_32534441/article/details/90264485&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
</description><author>2826708201@qq.com (LifeAlsoIsGG)</author><guid isPermaLink="true">/archives/Redis实现单点登录/</guid><pubDate>Sun, 08 Nov 2020 01:33:47 +0806</pubDate></item><item><title>Redis部署与基本使用</title><link>/archives/Redis部署与基本使用/</link><description>&lt;h2&gt;参考&lt;/h2&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/redis/redis-tutorial.html"&gt;菜鸟笔记Redis&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;1. Redis安装&lt;/h2&gt;
&lt;h3&gt;使用Docker在Linux下安装&lt;/h3&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/docker/docker-install-redis.html"&gt;https://www.runoob.com/docker/docker-install-redis.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;以配置文件方式启动&lt;/h3&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/weixin_42456466/article/details/87270959"&gt;https://blog.csdn.net/weixin_42456466/article/details/87270959&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;修改密码&lt;/h3&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/x-ll123/p/9717351.html"&gt;https://www.cnblogs.com/x-ll123/p/9717351.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;使用RedisDesktopManager连接&lt;/h3&gt;
&lt;p&gt;下载RedisDesktopManager后直接连接即可&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1100" data-height="834" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/e4f9debe339cc9955837b4ed6bdce54a.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;连接后&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1100" data-height="834" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/89a1988c8e1404690ff45179e8022d9c.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;2. Redis性能测试redis-benchmark&lt;/h2&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/redis/redis-benchmarks.html"&gt;https://www.runoob.com/redis/redis-benchmarks.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;Docker&lt;/code&gt;中的&lt;code&gt;redis-benchmark&lt;/code&gt;测试命令&lt;/p&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/jianjun_fei/article/details/95108694"&gt;https://blog.csdn.net/jianjun_fei/article/details/95108694&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;docker &lt;span class="nb"&gt;exec&lt;/span&gt; -it containerName/containerid redis-benchmark -h &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1 -p &lt;span class="m"&gt;6379&lt;/span&gt; -c &lt;span class="m"&gt;100&lt;/span&gt; -n &lt;span class="m"&gt;100000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1224" data-height="352" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/2f2783d1890c98258636c62a3f7073ba.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;3. Redis基本命令使用&lt;/h2&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://redis.io/commands"&gt;官方命令文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://redisdoc.com/"&gt;redis中文文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/redis/redis-commands.html"&gt;菜鸟&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;数据库&lt;/h3&gt;
&lt;p&gt;切换数据库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;数据库大小(key数量)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dbsize
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;清空当前数据库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;flushdb

&lt;span class="c1"&gt;#清空所有&lt;/span&gt;
flushall
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;键Key&lt;/h3&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/redis/redis-keys.html"&gt;https://www.runoob.com/redis/redis-keys.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h4&gt;查看所有key&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;keys *
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;设置过期时间&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;expire &lt;span class="o"&gt;[&lt;/span&gt;key&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;second&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;查看剩余时间&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ttl &lt;span class="o"&gt;[&lt;/span&gt;key&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;两种情况&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;-1：未设置过期时间&lt;/li&gt;
&lt;li&gt;-2：已过期或不存在key&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h4&gt;查看key对应的value类型&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt; key
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;给某个key的value拼接&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;append &lt;span class="o"&gt;[&lt;/span&gt;key&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;value&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;获取key对应value的长度&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;strlen &lt;span class="o"&gt;[&lt;/span&gt;key&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;根据range截取&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#截取字符串[0,3]&lt;/span&gt;
getrange &lt;span class="o"&gt;[&lt;/span&gt;key&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;替换&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#从0开始替换为value&lt;/span&gt;
setrange &lt;span class="o"&gt;[&lt;/span&gt;key&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;value&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;对于value为integer类型的操作&lt;/h4&gt;
&lt;h5&gt;自增长++&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;incr &lt;span class="o"&gt;[&lt;/span&gt;key&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;自减小--&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;decr &lt;span class="o"&gt;[&lt;/span&gt;key&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;指定增加大小&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;incrby &lt;span class="o"&gt;[&lt;/span&gt;key&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;number&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;指定减小大小&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;decrby &lt;span class="o"&gt;[&lt;/span&gt;key&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;number&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;List&lt;/h3&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/redis/redis-lists.html"&gt;Redis 列表(List) | 菜鸟教程 (runoob.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Set&lt;/h3&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/redis/redis-sets.html"&gt;Redis 集合(Set) | 菜鸟教程 (runoob.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Hash&lt;/h3&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/redis/redis-hashes.html"&gt;Redis 哈希(Hash) | 菜鸟教程 (runoob.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;ZSet&lt;/h3&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.runoob.com/redis/redis-sorted-sets.html"&gt;Redis 有序集合(sorted set) | 菜鸟教程 (runoob.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Geospatial&lt;/h3&gt;
&lt;p&gt;地图经纬度，底层是用ZSet，可以使用ZSet的命令&lt;/p&gt;
&lt;h3&gt;Hyperloglog&lt;/h3&gt;
&lt;p&gt;基数&lt;/p&gt;
&lt;h3&gt;Bitmap&lt;/h3&gt;
&lt;p&gt;二进制，可用于打卡等状态变化&lt;/p&gt;
&lt;h2&gt;4. Redis事务&lt;/h2&gt;
&lt;p&gt;Redis 事务可以一次执行多个命令， 并且带有以下三个重要的保证：&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;批量操作在发送 EXEC 命令前被放入队列缓存。&lt;/li&gt;
&lt;li&gt;收到 EXEC 命令后进入事务执行，事务中任意命令执行失败，其余的命令依然被执行。&lt;/li&gt;
&lt;li&gt;在事务执行过程，其他客户端提交的命令请求不会插入到事务执行命令序列中。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;一个事务从开始到执行会经历以下三个阶段：&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;开始事务。&lt;/li&gt;
&lt;li&gt;命令入队。&lt;/li&gt;
&lt;li&gt;执行事务。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;以下是一个事务的例子， 它先以 &lt;strong&gt;MULTI&lt;/strong&gt; 开始一个事务， 然后将多个命令入队到事务中， 最后由 &lt;strong&gt;EXEC&lt;/strong&gt; 命令触发事务， 一并执行事务中的所有命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;redis &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; MULTI
OK

redis &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; SET book-name &lt;span class="s2"&gt;&amp;quot;Mastering C++ in 21 days&amp;quot;&lt;/span&gt;
QUEUED

redis &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; GET book-name
QUEUED

redis &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; SADD tag &lt;span class="s2"&gt;&amp;quot;C++&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Programming&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Mastering Series&amp;quot;&lt;/span&gt;
QUEUED

redis &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; SMEMBERS tag
QUEUED

redis &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; EXEC
&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; OK
&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Mastering C++ in 21 days&amp;quot;&lt;/span&gt;
&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;integer&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt;
&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Mastering Series&amp;quot;&lt;/span&gt;
   &lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;C++&amp;quot;&lt;/span&gt;
   &lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Programming&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;单个 Redis 命令的执行是原子性的，但 Redis 没有在事务上增加任何维持原子性的机制，所以 Redis 事务的执行并不是原子性的。&lt;/p&gt;
&lt;p&gt;事务可以理解为一个打包的批量执行脚本，但批量指令并非原子化的操作，中间某条指令的失败不会导致前面已做指令的回滚，也不会造成后续的指令不做。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;redis &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:7000&amp;gt; multi
OK
redis &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:7000&amp;gt; &lt;span class="nb"&gt;set&lt;/span&gt; a aaa
QUEUED
redis &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:7000&amp;gt; &lt;span class="nb"&gt;set&lt;/span&gt; b bbb
QUEUED
redis &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:7000&amp;gt; &lt;span class="nb"&gt;set&lt;/span&gt; c ccc
QUEUED
redis &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:7000&amp;gt; &lt;span class="nb"&gt;exec&lt;/span&gt;
&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; OK
&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; OK
&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; OK
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如果在 &lt;code&gt;set b bbb&lt;/code&gt; 处失败，&lt;code&gt;set a&lt;/code&gt; 已成功不会回滚，&lt;code&gt;set c&lt;/code&gt; 还会继续执行。&lt;/p&gt;
&lt;p&gt;取消事务&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;discard
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;5. Redis用监视器实现锁&lt;/h2&gt;
&lt;p&gt;开启一个线程，开启监视器监视key&lt;code&gt;money&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; get money
&lt;span class="s2"&gt;&amp;quot;1080&amp;quot;&lt;/span&gt;
&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; watch money
OK
&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; multi
OK
&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; incrby money &lt;span class="m"&gt;100&lt;/span&gt;
QUEUED
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在执行事务前修改前，用另一个线程修改&lt;code&gt;money&lt;/code&gt;的值&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; get money
&lt;span class="s2"&gt;&amp;quot;1080&amp;quot;&lt;/span&gt;
&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; &lt;span class="nb"&gt;set&lt;/span&gt; money &lt;span class="m"&gt;2000&lt;/span&gt;
OK
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;此时再执行第一个线程的事务，redis发现监视的值&lt;code&gt;money&lt;/code&gt;被更改，不会执行关于&lt;code&gt;money&lt;/code&gt;的操作&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt; &lt;span class="nb"&gt;exec&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;nil&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:6379&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;原理&lt;/h3&gt;
&lt;p&gt;watch相当于实现了&lt;code&gt;乐观锁&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;6. Jedis操作Redis&lt;/h2&gt;
&lt;p&gt;导入包&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;&amp;lt;!-- https://mvnrepository.com/artifact/redis.clients/jedis --&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;redis.clients&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jedis&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.3.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.alibaba&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;fastjson&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.2.70&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;测试连接&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;pingTest&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Jedis&lt;/span&gt; &lt;span class="n"&gt;jedis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Jedis&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;127.0.0.1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6379&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="c1"&gt;//密码验证&lt;/span&gt;
        &lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;auth&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;123456&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ping&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;HashTest&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TestHash&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Jedis&lt;/span&gt; &lt;span class="n"&gt;jedis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Jedis&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;47.100.59.153&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6379&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;auth&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0.00.0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;flushDB&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;map&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashMap&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;key1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;value1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;key2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;value2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;key3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;value3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;key4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;value4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="c1"&gt;//添加名称为hash（key）的hash元素&lt;/span&gt;
        &lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hmset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="c1"&gt;//向名称为hash的hash中添加key为key5，value为value5元素&lt;/span&gt;
        &lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;key5&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;value5&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;散列hash的所有键值对为：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hgetAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="c1"&gt;//return Map&amp;lt;String,String&amp;gt;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;散列hash的所有键为：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hkeys&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="c1"&gt;//return Set&amp;lt;String&amp;gt;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;散列hash的所有值为：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hvals&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="c1"&gt;//return List&amp;lt;String&amp;gt;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;将key6保存的值加上一个整数，如果key6不存在则添加key6：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hincrBy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;key6&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;散列hash的所有键值对为：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hgetAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;将key6保存的值加上一个整数，如果key6不存在则添加key6：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hincrBy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;key6&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;散列hash的所有键值对为：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hgetAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;删除一个或者多个键值对：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hdel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;key2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;散列hash的所有键值对为：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hgetAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;散列hash中键值对的个数：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hlen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;判断hash中是否存在key2：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hexists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;key2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;判断hash中是否存在key3：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hexists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;key3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;获取hash中的值：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hmget&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;key3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;获取hash中的值：&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hmget&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hash&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;key3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;key4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;7. SpringBoot整合Redis&lt;/h2&gt;
&lt;p&gt;原先底层使用的是&lt;code&gt;jedis&lt;/code&gt;，在Spring2.x后改为&lt;code&gt;lettuce&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;jedis：采用的直连,多个线程操作的话,是不安全的,如果想要避免不安全的,使用 &lt;code&gt;jedis pool&lt;/code&gt;连接池!更像&lt;code&gt;BIO模式&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;lettuce：采用&lt;code&gt;netty&lt;/code&gt;，实例可以再多个线程中进行共享,不存在线程不安全的情况!可以减少线程数据了,更像&lt;code&gt;NIO模式&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;导入依赖&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;pom.xml&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dependency&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;groupId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;springframework&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;boot&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;groupId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;artifactId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;spring&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;boot&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;starter&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;redis&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;artifactId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;dependency&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code&gt;application.yml&lt;/code&gt;配置&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;spring&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="c1"&gt;#reids相关配置&lt;/span&gt;
  &lt;span class="nt"&gt;redis&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="c1"&gt;#redis服务器地址&lt;/span&gt;
    &lt;span class="nt"&gt;host&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;127.0.0.1&lt;/span&gt;
    &lt;span class="c1"&gt;#redis服务器端口&lt;/span&gt;
    &lt;span class="nt"&gt;port&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;6379&lt;/span&gt;
    &lt;span class="nt"&gt;database&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;0&lt;/span&gt;
    &lt;span class="c1"&gt;#密码&lt;/span&gt;
    &lt;span class="nt"&gt;password&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;123456&lt;/span&gt;
    &lt;span class="nt"&gt;jedis&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;pool&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="c1"&gt;#连接池最大连接数（使用负值表示没有限制）&lt;/span&gt;
        &lt;span class="nt"&gt;max-active&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;20&lt;/span&gt;
        &lt;span class="c1"&gt;#连接池最大阻塞等待时间（使用负值表示没有限制）&lt;/span&gt;
        &lt;span class="nt"&gt;max-wait&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;-1&lt;/span&gt;
        &lt;span class="c1"&gt;#连接池中最大空闲连接&lt;/span&gt;
        &lt;span class="nt"&gt;max-idle&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;10&lt;/span&gt;
        &lt;span class="c1"&gt;#连接池中最小空闲连接&lt;/span&gt;
        &lt;span class="nt"&gt;min-idle&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;1&lt;/span&gt;
    &lt;span class="c1"&gt;# 连接超时时间(毫秒)&lt;/span&gt;
    &lt;span class="nt"&gt;timeout&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;1000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;简单使用示例&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;SpringbootDemoApplicationTests.java&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@Autowired&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;RedisTemplate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;


    &lt;span class="nd"&gt;@Test&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;redisTest&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;myKey&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;你好&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;myKey&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

        &lt;span class="cm"&gt;/*获得数据库对象*/&lt;/span&gt;
        &lt;span class="n"&gt;RedisConnection&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getConnectionFactory&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getConnection&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;flushDb&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;序列化配置&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;RedisAutoConfiguration.java&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@Configuration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
  &lt;span class="n"&gt;proxyBeanMethods&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nd"&gt;@ConditionalOnClass&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="n"&gt;RedisOperations&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="nd"&gt;@EnableConfigurationProperties&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="n"&gt;RedisProperties&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="nd"&gt;@Import&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="n"&gt;LettuceConnectionConfiguration&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;JedisConnectionConfiguration&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RedisAutoConfiguration&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;RedisAutoConfiguration&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="nd"&gt;@Bean&lt;/span&gt;
  &lt;span class="nd"&gt;@ConditionalOnMissingBean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;redisTemplate&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;//注解意思为当没有自定义redisTemplate使使用此bean，可以自定义来替换这个默认的&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;RedisTemplate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RedisConnectionFactory&lt;/span&gt; &lt;span class="n"&gt;redisConnectionFactory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;UnknownHostException&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// 默认的RedisTemplate没有过多地设置，redis对象都是需要序列化&lt;/span&gt;
    &lt;span class="c1"&gt;// 两个泛型都是object object 的类型，我们后使用需要强制转换&amp;lt;String, Object&amp;gt;&lt;/span&gt;
    &lt;span class="n"&gt;RedisTemplate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;template&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;RedisTemplate&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setConnectionFactory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;redisConnectionFactory&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="nd"&gt;@Bean&lt;/span&gt;
  &lt;span class="nd"&gt;@ConditionalOnMissingBean&lt;/span&gt; &lt;span class="c1"&gt;//由于string是最常使用的bean，所以这里单独定义一个string的redisTemplate&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;StringRedisTemplate&lt;/span&gt; &lt;span class="nf"&gt;stringRedisTemplate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RedisConnectionFactory&lt;/span&gt; &lt;span class="n"&gt;redisConnectionFactory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;UnknownHostException&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;StringRedisTemplate&lt;/span&gt; &lt;span class="n"&gt;template&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StringRedisTemplate&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setConnectionFactory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;redisConnectionFactory&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;RedisTemplate.java&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@Nullable&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;RedisSerializer&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;defaultSerializer&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nd"&gt;@Nullable&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;ClassLoader&lt;/span&gt; &lt;span class="n"&gt;classLoader&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nd"&gt;@Nullable&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;RedisSerializer&lt;/span&gt; &lt;span class="n"&gt;keySerializer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nd"&gt;@Nullable&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;RedisSerializer&lt;/span&gt; &lt;span class="n"&gt;valueSerializer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nd"&gt;@Nullable&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;RedisSerializer&lt;/span&gt; &lt;span class="n"&gt;hashKeySerializer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nd"&gt;@Nullable&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;RedisSerializer&lt;/span&gt; &lt;span class="n"&gt;hashValueSerializer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;


&lt;span class="c1"&gt;//这里默认使用的是JDK的序列化，可以自定义一个配置类使用JSON序列化&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;defaultSerializer&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;defaultSerializer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JdkSerializationRedisSerializer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;classLoader&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;classLoader&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getClassLoader&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;当没有序列化对象直接传对象作为&lt;code&gt;value&lt;/code&gt;时会报错误&lt;code&gt;SerializationException&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@Autowired&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;RedisTemplate&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="nd"&gt;@Test&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;redisTest_2&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;JsonProcessingException&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;User&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;User&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;builder&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;uid&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="na"&gt;realName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;realName&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="na"&gt;build&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="c1"&gt;// 当没有序列化对象时&lt;/span&gt;
  &lt;span class="c1"&gt;// String jsonUser = new ObjectMapper().writeValueAsString(user);&lt;/span&gt;
  &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1510" data-height="186" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/a7758455462d5d318811b887bed33d25.jpg" alt="" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;配置redisConfig类&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;redisConfig.java&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;用于替换在&lt;code&gt;RedisAutoConfiguration&lt;/code&gt;默认的&lt;code&gt;RedisTemplate&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@Configuration&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RedisConfig&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="cm"&gt;/*自定义RedisTemplate*/&lt;/span&gt;
    &lt;span class="nd"&gt;@Bean&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;RedisTemplate&lt;/span&gt; &lt;span class="nf"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RedisConnectionFactory&lt;/span&gt; &lt;span class="n"&gt;factory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;RedisTemplate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;RedisTemplate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setConnectionFactory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;factory&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="c1"&gt;// 使用Jackson2JsonRedisSerialize 替换默认序列化&lt;/span&gt;
        &lt;span class="n"&gt;Jackson2JsonRedisSerializer&lt;/span&gt; &lt;span class="n"&gt;jackson2JsonRedisSerializer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Jackson2JsonRedisSerializer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;ObjectMapper&lt;/span&gt; &lt;span class="n"&gt;objectMapper&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ObjectMapper&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;objectMapper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVisibility&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PropertyAccessor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ALL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;JsonAutoDetect&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Visibility&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ANY&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;objectMapper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;enableDefaultTyping&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ObjectMapper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DefaultTyping&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;NON_FINAL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;jackson2JsonRedisSerializer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setObjectMapper&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;objectMapper&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="c1"&gt;// 设置value的序列化规则和 key的序列化规则&lt;/span&gt;
        &lt;span class="n"&gt;StringRedisSerializer&lt;/span&gt; &lt;span class="n"&gt;stringRedisSerializer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StringRedisSerializer&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// key采用String的序列化方式&lt;/span&gt;
        &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setKeySerializer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;stringRedisSerializer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="c1"&gt;// hash的key也采用String的序列化方式&lt;/span&gt;
        &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setHashKeySerializer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;stringRedisSerializer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="c1"&gt;// value序列化方式采用jackson&lt;/span&gt;
        &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setValueSerializer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;jackson2JsonRedisSerializer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="c1"&gt;// hash的value也采用jackson&lt;/span&gt;
        &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setHashValueSerializer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;jackson2JsonRedisSerializer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;afterPropertiesSet&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;存储一个对象&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@Test&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;redisTest_2&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;JsonProcessingException&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;User&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;User&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;builder&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;uid&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="na"&gt;realName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;realName&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="na"&gt;build&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user5&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user5&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;存储在redis中的是已经序列化的字符串&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="688" data-height="295" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/72541914599758c3bdc71c7d83484fa0.jpg" alt="存储在Redis中序列化的User" /&gt;&lt;figcaption&gt;存储在Redis中序列化的User&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;取出来后会经过反序列化&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1062" data-height="263" src="https://cdn.jsdelivr.net/gh/ze/Wiki@gh-pages/archives/assets/688406cdb8d9a5ca05687ce0118265c9.jpg" alt="取出User并反序列化" /&gt;&lt;figcaption&gt;取出User并反序列化&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;封装常用API到&lt;code&gt;RedisUtil&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;::: demo RedisUtil.java&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;com.lifeisgg.springboot_demo.util&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.springframework.beans.factory.annotation.Autowired&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.springframework.data.redis.core.RedisTemplate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.springframework.stereotype.Component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.springframework.util.CollectionUtils&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.List&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Map&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Set&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.concurrent.TimeUnit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt; * @Project: springboot_demo&lt;/span&gt;
&lt;span class="cm"&gt; * @Package: com.lifeisgg.springboot_demo.util&lt;/span&gt;
&lt;span class="cm"&gt; * @ClassName: RedisUtil&lt;/span&gt;
&lt;span class="cm"&gt; * @Author: Chen Long&lt;/span&gt;
&lt;span class="cm"&gt; * @Description:&lt;/span&gt;
&lt;span class="cm"&gt; * @Datetime: 2020/12/1  20:32&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="nd"&gt;@Component&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RedisUtil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;@Autowired&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;RedisTemplate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="c1"&gt;// =============================common============================&lt;/span&gt;
    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 指定缓存失效时间&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key  键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param time 时间(秒)&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;expire&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;expire&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TimeUnit&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SECONDS&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 根据key 获取过期时间&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key 键 不能为null&lt;/span&gt;
&lt;span class="cm"&gt;     * @return 时间(秒) 返回0代表为永久有效&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;getExpire&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getExpire&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TimeUnit&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SECONDS&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 判断key是否存在&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key 键&lt;/span&gt;
&lt;span class="cm"&gt;     * @return true 存在 false不存在&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;hasKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hasKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 删除缓存&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key 可以传一个值 或多个&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="nd"&gt;@SuppressWarnings&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;unchecked&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;del&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CollectionUtils&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;arrayToList&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="c1"&gt;// ============================String=============================&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 普通缓存获取&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key 键&lt;/span&gt;
&lt;span class="cm"&gt;     * @return 值&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 普通缓存放入&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param value 值&lt;/span&gt;
&lt;span class="cm"&gt;     * @return true成功 false失败&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 普通缓存放入并设置时间&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param value 值&lt;/span&gt;
&lt;span class="cm"&gt;     * @param time  时间(秒) time要大于0 如果time小于等于0 将设置无限期&lt;/span&gt;
&lt;span class="cm"&gt;     * @return true成功 false 失败&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TimeUnit&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SECONDS&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 递增&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param delta 要增加几(大于0)&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;delta&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;delta&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;RuntimeException&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;递增因子必须大于0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;increment&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;delta&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 递减&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param delta 要减少几(小于0)&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;decr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;delta&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;delta&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;RuntimeException&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;递减因子必须大于0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;increment&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;delta&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="c1"&gt;// ================================Map=================================&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * HashGet&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key  键 不能为null&lt;/span&gt;
&lt;span class="cm"&gt;     * @param item 项 不能为null&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="nf"&gt;hget&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForHash&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 获取hashKey对应的所有键值&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key 键&lt;/span&gt;
&lt;span class="cm"&gt;     * @return 对应的多个键值&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;hmget&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForHash&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;entries&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * HashSet&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key 键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param map 对应多个键值&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;hmset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForHash&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;putAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * HashSet 并设置时间&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key  键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param map  对应多个键值&lt;/span&gt;
&lt;span class="cm"&gt;     * @param time 时间(秒)&lt;/span&gt;
&lt;span class="cm"&gt;     * @return true成功 false失败&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;hmset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForHash&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;putAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;expire&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 向一张hash表中放入数据,如果不存在将创建&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param item  项&lt;/span&gt;
&lt;span class="cm"&gt;     * @param value 值&lt;/span&gt;
&lt;span class="cm"&gt;     * @return true 成功 false失败&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;hset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForHash&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 向一张hash表中放入数据,如果不存在将创建&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param item  项&lt;/span&gt;
&lt;span class="cm"&gt;     * @param value 值&lt;/span&gt;
&lt;span class="cm"&gt;     * @param time  时间(秒) 注意:如果已存在的hash表有时间,这里将会替换原有的时间&lt;/span&gt;
&lt;span class="cm"&gt;     * @return true 成功 false失败&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;hset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForHash&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;expire&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 删除hash表中的值&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key  键 不能为null&lt;/span&gt;
&lt;span class="cm"&gt;     * @param item 项 可以使多个 不能为null&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;hdel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForHash&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 判断hash表中是否有该项的值&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key  键 不能为null&lt;/span&gt;
&lt;span class="cm"&gt;     * @param item 项 不能为null&lt;/span&gt;
&lt;span class="cm"&gt;     * @return true 存在 false不存在&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;hHasKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForHash&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;hasKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * hash递增 如果不存在,就会创建一个 并把新增后的值返回&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key  键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param item 项&lt;/span&gt;
&lt;span class="cm"&gt;     * @param by   要增加几(大于0)&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;hincr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForHash&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;increment&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * hash递减&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key  键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param item 项&lt;/span&gt;
&lt;span class="cm"&gt;     * @param by   要减少记(小于0)&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;hdecr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForHash&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;increment&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="c1"&gt;// ============================set=============================&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 根据key获取Set中的所有值&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key 键&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;sGet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForSet&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;members&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 根据value从一个set中查询,是否存在&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param value 值&lt;/span&gt;
&lt;span class="cm"&gt;     * @return true 存在 false不存在&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;sHasKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForSet&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;isMember&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 将数据放入set缓存&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key    键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param values 值 可以是多个&lt;/span&gt;
&lt;span class="cm"&gt;     * @return 成功个数&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;sSet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForSet&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 将set数据放入缓存&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key    键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param time   时间(秒)&lt;/span&gt;
&lt;span class="cm"&gt;     * @param values 值 可以是多个&lt;/span&gt;
&lt;span class="cm"&gt;     * @return 成功个数&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;sSetAndTime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;Long&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForSet&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;expire&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 获取set缓存的长度&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key 键&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;sGetSetSize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForSet&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 移除值为value的&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key    键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param values 值 可以是多个&lt;/span&gt;
&lt;span class="cm"&gt;     * @return 移除的个数&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;setRemove&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;Long&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForSet&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// ===============================list=================================&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 获取list缓存的内容&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param start 开始&lt;/span&gt;
&lt;span class="cm"&gt;     * @param end   结束 0 到 -1代表所有值&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;lGet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForList&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 获取list缓存的长度&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key 键&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;lGetListSize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForList&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 通过索引 获取list中的值&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param index 索引 index&amp;gt;=0时， 0 表头，1 第二个元素，依次类推；index&amp;lt;0时，-1，表尾，-2倒数第二个元素，依次类推&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="nf"&gt;lGetIndex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForList&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;index&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 将list放入缓存&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param value 值&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;lSet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForList&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;rightPush&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 将list放入缓存&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param value 值&lt;/span&gt;
&lt;span class="cm"&gt;     * @param time  时间(秒)&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;lSet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForList&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;rightPush&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;expire&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 将list放入缓存&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param value 值&lt;/span&gt;
&lt;span class="cm"&gt;     * @return&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;lSet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForList&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;rightPushAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 将list放入缓存&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param value 值&lt;/span&gt;
&lt;span class="cm"&gt;     * @param time  时间(秒)&lt;/span&gt;
&lt;span class="cm"&gt;     * @return&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;lSet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForList&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;rightPushAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;expire&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 根据索引修改list中的某条数据&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param index 索引&lt;/span&gt;
&lt;span class="cm"&gt;     * @param value 值&lt;/span&gt;
&lt;span class="cm"&gt;     * @return&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;lUpdateIndex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForList&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * 移除N个值为value&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param key   键&lt;/span&gt;
&lt;span class="cm"&gt;     * @param count 移除多少个&lt;/span&gt;
&lt;span class="cm"&gt;     * @param value 值&lt;/span&gt;
&lt;span class="cm"&gt;     * @return 移除的个数&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;lRemove&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;Long&lt;/span&gt; &lt;span class="n"&gt;remove&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForList&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:::&lt;/p&gt;
&lt;h2&gt;8. &lt;code&gt;redis.conf&lt;/code&gt;详解&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;redis.conf&lt;/code&gt;官方下载地址&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="http://download.redis.io/redis-stable/redis.conf"&gt;http://download.redis.io/redis-stable/redis.conf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;8.1 存储单位说明&lt;/h3&gt;
&lt;p&gt;::: demo 存储单位说明&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Redis configuration file example.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Note that in order to read the configuration file, Redis must be&lt;/span&gt;
&lt;span class="c1"&gt;# started with the file path as first argument:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# ./redis-server /path/to/redis.conf&lt;/span&gt;

&lt;span class="c1"&gt;# Note on units: when memory size is needed, it is possible to specify&lt;/span&gt;
&lt;span class="c1"&gt;# it in the usual form of 1k 5GB 4M and so forth:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# 1k =&amp;gt; 1000 bytes&lt;/span&gt;
&lt;span class="c1"&gt;# 1kb =&amp;gt; 1024 bytes&lt;/span&gt;
&lt;span class="c1"&gt;# 1m =&amp;gt; 1000000 bytes&lt;/span&gt;
&lt;span class="c1"&gt;# 1mb =&amp;gt; 1024*1024 bytes&lt;/span&gt;
&lt;span class="c1"&gt;# 1g =&amp;gt; 1000000000 bytes&lt;/span&gt;
&lt;span class="c1"&gt;# 1gb =&amp;gt; 1024*1024*1024 bytes&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# units are case insensitive so 1GB 1Gb 1gB are all the same.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:::&lt;/p&gt;
&lt;h3&gt;8.2 网络配置&lt;/h3&gt;
&lt;p&gt;::: demo 网络配置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;################################## NETWORK #####################################&lt;/span&gt;

&lt;span class="c1"&gt;# 绑定的IP&lt;/span&gt;
&lt;span class="nb"&gt;bind&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1

&lt;span class="c1"&gt;# 保护模式是否开启，默认开启&lt;/span&gt;
protected-mode yes

&lt;span class="c1"&gt;# 端口号&lt;/span&gt;
port &lt;span class="m"&gt;6379&lt;/span&gt;

&lt;span class="c1"&gt;# TCP listen() backlog.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# In high requests-per-second environments you need a high backlog in order&lt;/span&gt;
&lt;span class="c1"&gt;# to avoid slow clients connection issues. Note that the Linux kernel&lt;/span&gt;
&lt;span class="c1"&gt;# will silently truncate it to the value of /proc/sys/net/core/somaxconn so&lt;/span&gt;
&lt;span class="c1"&gt;# make sure to raise both the value of somaxconn and tcp_max_syn_backlog&lt;/span&gt;
&lt;span class="c1"&gt;# in order to get the desired effect.&lt;/span&gt;
tcp-backlog &lt;span class="m"&gt;511&lt;/span&gt;

&lt;span class="c1"&gt;# Unix socket.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Specify the path for the Unix socket that will be used to listen for&lt;/span&gt;
&lt;span class="c1"&gt;# incoming connections. There is no default, so Redis will not listen&lt;/span&gt;
&lt;span class="c1"&gt;# on a unix socket when not specified.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# unixsocket /tmp/redis.sock&lt;/span&gt;
&lt;span class="c1"&gt;# unixsocketperm 700&lt;/span&gt;

&lt;span class="c1"&gt;# Close the connection after a client is idle for N seconds (0 to disable)&lt;/span&gt;
timeout &lt;span class="m"&gt;0&lt;/span&gt;

&lt;span class="c1"&gt;# TCP keepalive.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence&lt;/span&gt;
&lt;span class="c1"&gt;# of communication. This is useful for two reasons:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# 1) Detect dead peers.&lt;/span&gt;
&lt;span class="c1"&gt;# 2) Force network equipment in the middle to consider the connection to be&lt;/span&gt;
&lt;span class="c1"&gt;#    alive.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# On Linux, the specified value (in seconds) is the period used to send ACKs.&lt;/span&gt;
&lt;span class="c1"&gt;# Note that to close the connection the double of the time is needed.&lt;/span&gt;
&lt;span class="c1"&gt;# On other kernels the period depends on the kernel configuration.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# A reasonable value for this option is 300 seconds, which is the new&lt;/span&gt;
&lt;span class="c1"&gt;# Redis default starting with Redis 3.2.1.&lt;/span&gt;
tcp-keepalive &lt;span class="m"&gt;300&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:::&lt;/p&gt;
&lt;h3&gt;8.3 基本配置&lt;/h3&gt;
&lt;p&gt;::: demo 基本配置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;################################# GENERAL #####################################&lt;/span&gt;

&lt;span class="c1"&gt;# 是否以守护进程的方式运行即后台运行，默认为no，需要改为yes&lt;/span&gt;
daemonize no

&lt;span class="c1"&gt;# 后台运行指定的pid文件&lt;/span&gt;
pidfile /var/run/redis_6379.pid

&lt;span class="c1"&gt;# 日志级别&lt;/span&gt;
&lt;span class="c1"&gt;# Specify the server verbosity level.&lt;/span&gt;
&lt;span class="c1"&gt;# This can be one of:&lt;/span&gt;
&lt;span class="c1"&gt;# debug (a lot of information, useful for development/testing)&lt;/span&gt;
&lt;span class="c1"&gt;# verbose (many rarely useful info, but not a mess like the debug level)&lt;/span&gt;
&lt;span class="c1"&gt;# notice (moderately verbose, what you want in production probably)&lt;/span&gt;
&lt;span class="c1"&gt;# warning (only very important / critical messages are logged)&lt;/span&gt;
loglevel notice

&lt;span class="c1"&gt;# 输入的日志位置文件名&lt;/span&gt;
&lt;span class="c1"&gt;# Specify the log file name. Also the empty string can be used to force&lt;/span&gt;
&lt;span class="c1"&gt;# Redis to log on the standard output. Note that if you use standard&lt;/span&gt;
&lt;span class="c1"&gt;# output for logging but daemonize, logs will be sent to /dev/null&lt;/span&gt;
logfile &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# 数据库数量&lt;/span&gt;
databases &lt;span class="m"&gt;16&lt;/span&gt;

&lt;span class="c1"&gt;# 运行时显示redislogo&lt;/span&gt;
always-show-logo yes
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:::&lt;/p&gt;
&lt;h3&gt;8.4 快照配置&lt;/h3&gt;
&lt;p&gt;::: demo 快照配置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;################################ SNAPSHOTTING  ################################&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Save the DB on disk:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#   save &amp;lt;seconds&amp;gt; &amp;lt;changes&amp;gt;&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#   Will save the DB if both the given number of seconds and the given&lt;/span&gt;
&lt;span class="c1"&gt;#   number of write operations against the DB occurred.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#   In the example below the behavior will be to save:&lt;/span&gt;
&lt;span class="c1"&gt;#   after 900 sec (15 min) if at least 1 key changed&lt;/span&gt;
&lt;span class="c1"&gt;#   after 300 sec (5 min) if at least 10 keys changed&lt;/span&gt;
&lt;span class="c1"&gt;#   after 60 sec if at least 10000 keys changed&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#   Note: you can disable saving completely by commenting out all &amp;quot;save&amp;quot; lines.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#   It is also possible to remove all the previously configured save&lt;/span&gt;
&lt;span class="c1"&gt;#   points by adding a save directive with a single empty string argument&lt;/span&gt;
&lt;span class="c1"&gt;#   like in the following example:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#   save &amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# 如果900s内,如果至少有一个1个key进行了修改,我们就进行持久化操作&lt;/span&gt;
save &lt;span class="m"&gt;900&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="c1"&gt;# 如果.00s内,如果至少有一个10个key进行了修改,我们就进行持久化操作&lt;/span&gt;
save &lt;span class="m"&gt;300&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;
&lt;span class="c1"&gt;# 如果60s内,如果至少有一个10000个key进行了修改,我们就进行持久化操作&lt;/span&gt;
save &lt;span class="m"&gt;60&lt;/span&gt; &lt;span class="m"&gt;10000&lt;/span&gt;

&lt;span class="c1"&gt;# By default Redis will stop accepting writes if RDB snapshots are enabled&lt;/span&gt;
&lt;span class="c1"&gt;# (at least one save point) and the latest background save failed.&lt;/span&gt;
&lt;span class="c1"&gt;# This will make the user aware (in a hard way) that data is not persisting&lt;/span&gt;
&lt;span class="c1"&gt;# on disk properly, otherwise chances are that no one will notice and some&lt;/span&gt;
&lt;span class="c1"&gt;# disaster will happen.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# If the background saving process will start working again Redis will&lt;/span&gt;
&lt;span class="c1"&gt;# automatically allow writes again.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# However if you have setup your proper monitoring of the Redis server&lt;/span&gt;
&lt;span class="c1"&gt;# and persistence, you may want to disable this feature so that Redis will&lt;/span&gt;
&lt;span class="c1"&gt;# continue to work as usual even if there are problems with disk,&lt;/span&gt;
&lt;span class="c1"&gt;# permissions, and so forth.&lt;/span&gt;
&lt;span class="c1"&gt;# 持久化操作失败是否还继续&lt;/span&gt;
stop-writes-on-bgsave-error yes

&lt;span class="c1"&gt;# Compress string objects using LZF when dump .rdb databases?&lt;/span&gt;
&lt;span class="c1"&gt;# By default compression is enabled as it&amp;#39;s almost always a win.&lt;/span&gt;
&lt;span class="c1"&gt;# If you want to save some CPU in the saving child set it to &amp;#39;no&amp;#39; but&lt;/span&gt;
&lt;span class="c1"&gt;# the dataset will likely be bigger if you have compressible values or keys.&lt;/span&gt;
&lt;span class="c1"&gt;# 是否压缩rdb文件，是的话会消耗一定CPU资源&lt;/span&gt;
rdbcompression yes

&lt;span class="c1"&gt;# Since version 5 of RDB a CRC64 checksum is placed at the end of the file.&lt;/span&gt;
&lt;span class="c1"&gt;# This makes the format more resistant to corruption but there is a performance&lt;/span&gt;
&lt;span class="c1"&gt;# hit to pay (around 10%) when saving and loading RDB files, so you can disable it&lt;/span&gt;
&lt;span class="c1"&gt;# for maximum performances.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# RDB files created with checksum disabled have a checksum of zero that will&lt;/span&gt;
&lt;span class="c1"&gt;# tell the loading code to skip the check.&lt;/span&gt;
&lt;span class="c1"&gt;# 保存rdb文件的时候是否校验rdb文件&lt;/span&gt;
rdbchecksum yes

&lt;span class="c1"&gt;# The filename where to dump the DB&lt;/span&gt;
dbfilename dump.rdb

&lt;span class="c1"&gt;# Remove RDB files used by replication in instances without persistence&lt;/span&gt;
&lt;span class="c1"&gt;# enabled. By default this option is disabled, however there are environments&lt;/span&gt;
&lt;span class="c1"&gt;# where for regulations or other security concerns, RDB files persisted on&lt;/span&gt;
&lt;span class="c1"&gt;# disk by masters in order to feed replicas, or stored on disk by replicas&lt;/span&gt;
&lt;span class="c1"&gt;# in order to load them for the initial synchronization, should be deleted&lt;/span&gt;
&lt;span class="c1"&gt;# ASAP. Note that this option ONLY WORKS in instances that have both AOF&lt;/span&gt;
&lt;span class="c1"&gt;# and RDB persistence disabled, otherwise is completely ignored.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# An alternative (and sometimes better) way to obtain the same effect is&lt;/span&gt;
&lt;span class="c1"&gt;# to use diskless replication on both master and replicas instances. However&lt;/span&gt;
&lt;span class="c1"&gt;# in the case of replicas, diskless is not always an option.&lt;/span&gt;
rdb-del-sync-files no

&lt;span class="c1"&gt;# The working directory.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The DB will be written inside this directory, with the filename specified&lt;/span&gt;
&lt;span class="c1"&gt;# above using the &amp;#39;dbfilename&amp;#39; configuration directive.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The Append Only File will also be created inside this directory.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Note that you must specify a directory here, not a file name.&lt;/span&gt;
&lt;span class="c1"&gt;# rdb文件保存的目录&lt;/span&gt;
dir ./
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:::&lt;/p&gt;
&lt;h3&gt;8.5 主从复制相关&lt;/h3&gt;
&lt;p&gt;::: demo 主从复制相关&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;################################# REPLICATION #################################&lt;/span&gt;

&lt;span class="c1"&gt;# Master-Replica replication. Use replicaof to make a Redis instance a copy of&lt;/span&gt;
&lt;span class="c1"&gt;# another Redis server. A few things to understand ASAP about Redis replication.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#   +------------------+      +---------------+&lt;/span&gt;
&lt;span class="c1"&gt;#   |      Master      | ---&amp;gt; |    Replica    |&lt;/span&gt;
&lt;span class="c1"&gt;#   | (receive writes) |      |  (exact copy) |&lt;/span&gt;
&lt;span class="c1"&gt;#   +------------------+      +---------------+&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# 1) Redis replication is asynchronous, but you can configure a master to&lt;/span&gt;
&lt;span class="c1"&gt;#    stop accepting writes if it appears to be not connected with at least&lt;/span&gt;
&lt;span class="c1"&gt;#    a given number of replicas.&lt;/span&gt;
&lt;span class="c1"&gt;# 2) Redis replicas are able to perform a partial resynchronization with the&lt;/span&gt;
&lt;span class="c1"&gt;#    master if the replication link is lost for a relatively small amount of&lt;/span&gt;
&lt;span class="c1"&gt;#    time. You may want to configure the replication backlog size (see the next&lt;/span&gt;
&lt;span class="c1"&gt;#    sections of this file) with a sensible value depending on your needs.&lt;/span&gt;
&lt;span class="c1"&gt;# 3) Replication is automatic and does not need user intervention. After a&lt;/span&gt;
&lt;span class="c1"&gt;#    network partition replicas automatically try to reconnect to masters&lt;/span&gt;
&lt;span class="c1"&gt;#    and resynchronize with them.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# replicaof &amp;lt;masterip&amp;gt; &amp;lt;masterport&amp;gt;&lt;/span&gt;

&lt;span class="c1"&gt;# If the master is password protected (using the &amp;quot;requirepass&amp;quot; configuration&lt;/span&gt;
&lt;span class="c1"&gt;# directive below) it is possible to tell the replica to authenticate before&lt;/span&gt;
&lt;span class="c1"&gt;# starting the replication synchronization process, otherwise the master will&lt;/span&gt;
&lt;span class="c1"&gt;# refuse the replica request.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# masterauth &amp;lt;master-password&amp;gt;&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# However this is not enough if you are using Redis ACLs (for Redis version&lt;/span&gt;
&lt;span class="c1"&gt;# 6 or greater), and the default user is not capable of running the PSYNC&lt;/span&gt;
&lt;span class="c1"&gt;# command and/or other commands needed for replication. In this case it&amp;#39;s&lt;/span&gt;
&lt;span class="c1"&gt;# better to configure a special user to use with replication, and specify the&lt;/span&gt;
&lt;span class="c1"&gt;# masteruser configuration as such:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# masteruser &amp;lt;username&amp;gt;&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# When masteruser is specified, the replica will authenticate against its&lt;/span&gt;
&lt;span class="c1"&gt;# master using the new AUTH form: AUTH &amp;lt;username&amp;gt; &amp;lt;password&amp;gt;.&lt;/span&gt;

&lt;span class="c1"&gt;# When a replica loses its connection with the master, or when the replication&lt;/span&gt;
&lt;span class="c1"&gt;# is still in progress, the replica can act in two different ways:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# 1) if replica-serve-stale-data is set to &amp;#39;yes&amp;#39; (the default) the replica will&lt;/span&gt;
&lt;span class="c1"&gt;#    still reply to client requests, possibly with out of date data, or the&lt;/span&gt;
&lt;span class="c1"&gt;#    data set may just be empty if this is the first synchronization.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# 2) If replica-serve-stale-data is set to &amp;#39;no&amp;#39; the replica will reply with&lt;/span&gt;
&lt;span class="c1"&gt;#    an error &amp;quot;SYNC with master in progress&amp;quot; to all commands except:&lt;/span&gt;
&lt;span class="c1"&gt;#    INFO, REPLICAOF, AUTH, PING, SHUTDOWN, REPLCONF, ROLE, CONFIG, SUBSCRIBE,&lt;/span&gt;
&lt;span class="c1"&gt;#    UNSUBSCRIBE, PSUBSCRIBE, PUNSUBSCRIBE, PUBLISH, PUBSUB, COMMAND, POST,&lt;/span&gt;
&lt;span class="c1"&gt;#    HOST and LATENCY.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
replica-serve-stale-data yes

&lt;span class="c1"&gt;# You can configure a replica instance to accept writes or not. Writing against&lt;/span&gt;
&lt;span class="c1"&gt;# a replica instance may be useful to store some ephemeral data (because data&lt;/span&gt;
&lt;span class="c1"&gt;# written on a replica will be easily deleted after resync with the master) but&lt;/span&gt;
&lt;span class="c1"&gt;# may also cause problems if clients are writing to it because of a&lt;/span&gt;
&lt;span class="c1"&gt;# misconfiguration.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Since Redis 2.6 by default replicas are read-only.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Note: read only replicas are not designed to be exposed to untrusted clients&lt;/span&gt;
&lt;span class="c1"&gt;# on the internet. It&amp;#39;s just a protection layer against misuse of the instance.&lt;/span&gt;
&lt;span class="c1"&gt;# Still a read only replica exports by default all the administrative commands&lt;/span&gt;
&lt;span class="c1"&gt;# such as CONFIG, DEBUG, and so forth. To a limited extent you can improve&lt;/span&gt;
&lt;span class="c1"&gt;# security of read only replicas using &amp;#39;rename-command&amp;#39; to shadow all the&lt;/span&gt;
&lt;span class="c1"&gt;# administrative / dangerous commands.&lt;/span&gt;
replica-read-only yes

&lt;span class="c1"&gt;# Replication SYNC strategy: disk or socket.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# New replicas and reconnecting replicas that are not able to continue the&lt;/span&gt;
&lt;span class="c1"&gt;# replication process just receiving differences, need to do what is called a&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;quot;full synchronization&amp;quot;. An RDB file is transmitted from the master to the&lt;/span&gt;
&lt;span class="c1"&gt;# replicas.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The transmission can happen in two different ways:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# 1) Disk-backed: The Redis master creates a new process that writes the RDB&lt;/span&gt;
&lt;span class="c1"&gt;#                 file on disk. Later the file is transferred by the parent&lt;/span&gt;
&lt;span class="c1"&gt;#                 process to the replicas incrementally.&lt;/span&gt;
&lt;span class="c1"&gt;# 2) Diskless: The Redis master creates a new process that directly writes the&lt;/span&gt;
&lt;span class="c1"&gt;#              RDB file to replica sockets, without touching the disk at all.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# With disk-backed replication, while the RDB file is generated, more replicas&lt;/span&gt;
&lt;span class="c1"&gt;# can be queued and served with the RDB file as soon as the current child&lt;/span&gt;
&lt;span class="c1"&gt;# producing the RDB file finishes its work. With diskless replication instead&lt;/span&gt;
&lt;span class="c1"&gt;# once the transfer starts, new replicas arriving will be queued and a new&lt;/span&gt;
&lt;span class="c1"&gt;# transfer will start when the current one terminates.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# When diskless replication is used, the master waits a configurable amount of&lt;/span&gt;
&lt;span class="c1"&gt;# time (in seconds) before starting the transfer in the hope that multiple&lt;/span&gt;
&lt;span class="c1"&gt;# replicas will arrive and the transfer can be parallelized.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# With slow disks and fast (large bandwidth) networks, diskless replication&lt;/span&gt;
&lt;span class="c1"&gt;# works better.&lt;/span&gt;
repl-diskless-sync no

&lt;span class="c1"&gt;# When diskless replication is enabled, it is possible to configure the delay&lt;/span&gt;
&lt;span class="c1"&gt;# the server waits in order to spawn the child that transfers the RDB via socket&lt;/span&gt;
&lt;span class="c1"&gt;# to the replicas.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This is important since once the transfer starts, it is not possible to serve&lt;/span&gt;
&lt;span class="c1"&gt;# new replicas arriving, that will be queued for the next RDB transfer, so the&lt;/span&gt;
&lt;span class="c1"&gt;# server waits a delay in order to let more replicas arrive.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The delay is specified in seconds, and by default is 5 seconds. To disable&lt;/span&gt;
&lt;span class="c1"&gt;# it entirely just set it to 0 seconds and the transfer will start ASAP.&lt;/span&gt;
repl-diskless-sync-delay &lt;span class="m"&gt;5&lt;/span&gt;

&lt;span class="c1"&gt;# -----------------------------------------------------------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# WARNING: RDB diskless load is experimental. Since in this setup the replica&lt;/span&gt;
&lt;span class="c1"&gt;# does not immediately store an RDB on disk, it may cause data loss during&lt;/span&gt;
&lt;span class="c1"&gt;# failovers. RDB diskless load + Redis modules not handling I/O reads may also&lt;/span&gt;
&lt;span class="c1"&gt;# cause Redis to abort in case of I/O errors during the initial synchronization&lt;/span&gt;
&lt;span class="c1"&gt;# stage with the master. Use only if your do what you are doing.&lt;/span&gt;
&lt;span class="c1"&gt;# -----------------------------------------------------------------------------&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Replica can load the RDB it reads from the replication link directly from the&lt;/span&gt;
&lt;span class="c1"&gt;# socket, or store the RDB to a file and read that file after it was completely&lt;/span&gt;
&lt;span class="c1"&gt;# received from the master.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# In many cases the disk is slower than the network, and storing and loading&lt;/span&gt;
&lt;span class="c1"&gt;# the RDB file may increase replication time (and even increase the master&amp;#39;s&lt;/span&gt;
&lt;span class="c1"&gt;# Copy on Write memory and salve buffers).&lt;/span&gt;
&lt;span class="c1"&gt;# However, parsing the RDB file directly from the socket may mean that we have&lt;/span&gt;
&lt;span class="c1"&gt;# to flush the contents of the current database before the full rdb was&lt;/span&gt;
&lt;span class="c1"&gt;# received. For this reason we have the following options:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;quot;disabled&amp;quot;    - Don&amp;#39;t use diskless load (store the rdb file to the disk first)&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;quot;on-empty-db&amp;quot; - Use diskless load only when it is completely safe.&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;quot;swapdb&amp;quot;      - Keep a copy of the current db contents in RAM while parsing&lt;/span&gt;
&lt;span class="c1"&gt;#                 the data directly from the socket. note that this requires&lt;/span&gt;
&lt;span class="c1"&gt;#                 sufficient memory, if you don&amp;#39;t have it, you risk an OOM kill.&lt;/span&gt;
repl-diskless-load disabled

&lt;span class="c1"&gt;# Replicas send PINGs to server in a predefined interval. It&amp;#39;s possible to&lt;/span&gt;
&lt;span class="c1"&gt;# change this interval with the repl_ping_replica_period option. The default&lt;/span&gt;
&lt;span class="c1"&gt;# value is 10 seconds.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# repl-ping-replica-period 10&lt;/span&gt;

&lt;span class="c1"&gt;# The following option sets the replication timeout for:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# 1) Bulk transfer I/O during SYNC, from the point of view of replica.&lt;/span&gt;
&lt;span class="c1"&gt;# 2) Master timeout from the point of view of replicas (data, pings).&lt;/span&gt;
&lt;span class="c1"&gt;# 3) Replica timeout from the point of view of masters (REPLCONF ACK pings).&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# It is important to make sure that this value is greater than the value&lt;/span&gt;
&lt;span class="c1"&gt;# specified for repl-ping-replica-period otherwise a timeout will be detected&lt;/span&gt;
&lt;span class="c1"&gt;# every time there is low traffic between the master and the replica. The default&lt;/span&gt;
&lt;span class="c1"&gt;# value is 60 seconds.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# repl-timeout 60&lt;/span&gt;

&lt;span class="c1"&gt;# Disable TCP_NODELAY on the replica socket after SYNC?&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# If you select &amp;quot;yes&amp;quot; Redis will use a smaller number of TCP packets and&lt;/span&gt;
&lt;span class="c1"&gt;# less bandwidth to send data to replicas. But this can add a delay for&lt;/span&gt;
&lt;span class="c1"&gt;# the data to appear on the replica side, up to 40 milliseconds with&lt;/span&gt;
&lt;span class="c1"&gt;# Linux kernels using a default configuration.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# If you select &amp;quot;no&amp;quot; the delay for data to appear on the replica side will&lt;/span&gt;
&lt;span class="c1"&gt;# be reduced but more bandwidth will be used for replication.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# By default we optimize for low latency, but in very high traffic conditions&lt;/span&gt;
&lt;span class="c1"&gt;# or when the master and replicas are many hops away, turning this to &amp;quot;yes&amp;quot; may&lt;/span&gt;
&lt;span class="c1"&gt;# be a good idea.&lt;/span&gt;
repl-disable-tcp-nodelay no

&lt;span class="c1"&gt;# Set the replication backlog size. The backlog is a buffer that accumulates&lt;/span&gt;
&lt;span class="c1"&gt;# replica data when replicas are disconnected for some time, so that when a&lt;/span&gt;
&lt;span class="c1"&gt;# replica wants to reconnect again, often a full resync is not needed, but a&lt;/span&gt;
&lt;span class="c1"&gt;# partial resync is enough, just passing the portion of data the replica&lt;/span&gt;
&lt;span class="c1"&gt;# missed while disconnected.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The bigger the replication backlog, the longer the replica can endure the&lt;/span&gt;
&lt;span class="c1"&gt;# disconnect and later be able to perform a partial resynchronization.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The backlog is only allocated if there is at least one replica connected.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# repl-backlog-size 1mb&lt;/span&gt;

&lt;span class="c1"&gt;# After a master has no connected replicas for some time, the backlog will be&lt;/span&gt;
&lt;span class="c1"&gt;# freed. The following option configures the amount of seconds that need to&lt;/span&gt;
&lt;span class="c1"&gt;# elapse, starting from the time the last replica disconnected, for the backlog&lt;/span&gt;
&lt;span class="c1"&gt;# buffer to be freed.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Note that replicas never free the backlog for timeout, since they may be&lt;/span&gt;
&lt;span class="c1"&gt;# promoted to masters later, and should be able to correctly &amp;quot;partially&lt;/span&gt;
&lt;span class="c1"&gt;# resynchronize&amp;quot; with other replicas: hence they should always accumulate backlog.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# A value of 0 means to never release the backlog.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# repl-backlog-ttl 3600&lt;/span&gt;

&lt;span class="c1"&gt;# The replica priority is an integer number published by Redis in the INFO&lt;/span&gt;
&lt;span class="c1"&gt;# output. It is used by Redis Sentinel in order to select a replica to promote&lt;/span&gt;
&lt;span class="c1"&gt;# into a master if the master is no longer working correctly.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# A replica with a low priority number is considered better for promotion, so&lt;/span&gt;
&lt;span class="c1"&gt;# for instance if there are three replicas with priority 10, 100, 25 Sentinel&lt;/span&gt;
&lt;span class="c1"&gt;# will pick the one with priority 10, that is the lowest.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# However a special priority of 0 marks the replica as not able to perform the&lt;/span&gt;
&lt;span class="c1"&gt;# role of master, so a replica with priority of 0 will never be selected by&lt;/span&gt;
&lt;span class="c1"&gt;# Redis Sentinel for promotion.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# By default the priority is 100.&lt;/span&gt;
replica-priority &lt;span class="m"&gt;100&lt;/span&gt;

&lt;span class="c1"&gt;# It is possible for a master to stop accepting writes if there are less than&lt;/span&gt;
&lt;span class="c1"&gt;# N replicas connected, having a lag less or equal than M seconds.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The N replicas need to be in &amp;quot;online&amp;quot; state.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The lag in seconds, that must be &amp;lt;= the specified value, is calculated from&lt;/span&gt;
&lt;span class="c1"&gt;# the last ping received from the replica, that is usually sent every second.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This option does not GUARANTEE that N replicas will accept the write, but&lt;/span&gt;
&lt;span class="c1"&gt;# will limit the window of exposure for lost writes in case not enough replicas&lt;/span&gt;
&lt;span class="c1"&gt;# are available, to the specified number of seconds.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# For example to require at least 3 replicas with a lag &amp;lt;= 10 seconds use:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# min-replicas-to-write 3&lt;/span&gt;
&lt;span class="c1"&gt;# min-replicas-max-lag 10&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Setting one or the other to 0 disables the feature.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# By default min-replicas-to-write is set to 0 (feature disabled) and&lt;/span&gt;
&lt;span class="c1"&gt;# min-replicas-max-lag is set to 10.&lt;/span&gt;

&lt;span class="c1"&gt;# A Redis master is able to list the address and port of the attached&lt;/span&gt;
&lt;span class="c1"&gt;# replicas in different ways. For example the &amp;quot;INFO replication&amp;quot; section&lt;/span&gt;
&lt;span class="c1"&gt;# offers this information, which is used, among other tools, by&lt;/span&gt;
&lt;span class="c1"&gt;# Redis Sentinel in order to discover replica instances.&lt;/span&gt;
&lt;span class="c1"&gt;# Another place where this info is available is in the output of the&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;quot;ROLE&amp;quot; command of a master.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The listed IP address and port normally reported by a replica is&lt;/span&gt;
&lt;span class="c1"&gt;# obtained in the following way:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#   IP: The address is auto detected by checking the peer address&lt;/span&gt;
&lt;span class="c1"&gt;#   of the socket used by the replica to connect with the master.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#   Port: The port is communicated by the replica during the replication&lt;/span&gt;
&lt;span class="c1"&gt;#   handshake, and is normally the port that the replica is using to&lt;/span&gt;
&lt;span class="c1"&gt;#   listen for connections.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# However when port forwarding or Network Address Translation (NAT) is&lt;/span&gt;
&lt;span class="c1"&gt;# used, the replica may actually be reachable via different IP and port&lt;/span&gt;
&lt;span class="c1"&gt;# pairs. The following two options can be used by a replica in order to&lt;/span&gt;
&lt;span class="c1"&gt;# report to its master a specific set of IP and port, so that both INFO&lt;/span&gt;
&lt;span class="c1"&gt;# and ROLE will report those values.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# There is no need to use both the options if you need to override just&lt;/span&gt;
&lt;span class="c1"&gt;# the port or the IP address.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# replica-announce-ip 5.5.5.5&lt;/span&gt;
&lt;span class="c1"&gt;# replica-announce-port 1234&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:::&lt;/p&gt;
&lt;h3&gt;8.6 安全配置&lt;/h3&gt;
&lt;p&gt;::: demo 安全配置&lt;/p&gt;
&lt;p&gt;查看密码&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;//密码为空时获取密码
config get requirepass

//结果
&lt;span class="s2"&gt;&amp;quot;requirepass&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;设置密码&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;config &lt;span class="nb"&gt;set&lt;/span&gt; requirepass &lt;span class="s2"&gt;&amp;quot;123456&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;密码登录&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;auth &lt;span class="m"&gt;123456&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;redis.conf&lt;/code&gt;设置密码&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;################################## SECURITY ###################################&lt;/span&gt;



&lt;span class="c1"&gt;# IMPORTANT NOTE: starting with Redis 6 &amp;quot;requirepass&amp;quot; is just a compatibility&lt;/span&gt;
&lt;span class="c1"&gt;# layer on top of the new ACL system. The option effect will be just setting&lt;/span&gt;
&lt;span class="c1"&gt;# the password for the default user. Clients will still authenticate using&lt;/span&gt;
&lt;span class="c1"&gt;# AUTH &amp;lt;password&amp;gt; as usually, or more explicitly with AUTH default &amp;lt;password&amp;gt;&lt;/span&gt;
&lt;span class="c1"&gt;# if they follow the new protocol: both will work.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# requirepass foobared&lt;/span&gt;
&lt;span class="c1"&gt;# 设置密码&lt;/span&gt;
requirepass &lt;span class="m"&gt;123456&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:::&lt;/p&gt;
&lt;h3&gt;8.7 客户端限制&lt;/h3&gt;
&lt;p&gt;::: demo 客户端限制&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;################################### CLIENTS ####################################&lt;/span&gt;

&lt;span class="c1"&gt;# Set the max number of connected clients at the same time. By default&lt;/span&gt;
&lt;span class="c1"&gt;# this limit is set to 10000 clients, however if the Redis server is not&lt;/span&gt;
&lt;span class="c1"&gt;# able to configure the process file limit to allow for the specified limit&lt;/span&gt;
&lt;span class="c1"&gt;# the max number of allowed clients is set to the current file limit&lt;/span&gt;
&lt;span class="c1"&gt;# minus 32 (as Redis reserves a few file descriptors for internal uses).&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Once the limit is reached Redis will close all the new connections sending&lt;/span&gt;
&lt;span class="c1"&gt;# an error &amp;#39;max number of clients reached&amp;#39;.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# IMPORTANT: When Redis Cluster is used, the max number of connections is also&lt;/span&gt;
&lt;span class="c1"&gt;# shared with the cluster bus: every node in the cluster will use two&lt;/span&gt;
&lt;span class="c1"&gt;# connections, one incoming and another outgoing. It is important to size the&lt;/span&gt;
&lt;span class="c1"&gt;# limit accordingly in case of very large clusters.&lt;/span&gt;
&lt;span class="c1"&gt;# 设置能连接的最大客户端数&lt;/span&gt;
maxclients &lt;span class="m"&gt;10000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:::&lt;/p&gt;
&lt;h3&gt;8.8 内存容量配置&lt;/h3&gt;
&lt;p&gt;参考&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.511yj.com/centos-redis-key.html"&gt;redis 设置过期Key 的 maxmemory-policy 六种方式 | 511遇见 (511yj.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;六种方式&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;1、volatile-lru：&lt;/strong&gt;只对设置了过期时间的key进行LRU（默认值） &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2、allkeys-lru ：&lt;/strong&gt; 删除lru算法的key  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;3、volatile-random：&lt;/strong&gt;随机删除即将过期key  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;4、allkeys-random：&lt;/strong&gt;随机删除  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;5、volatile-ttl ：&lt;/strong&gt; 删除即将过期的  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;6、noeviction ：&lt;/strong&gt; 永不过期，返回错误&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;::: demo 内存容量配置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;############################## MEMORY MANAGEMENT ################################&lt;/span&gt;


&lt;span class="c1"&gt;#最大内存容量&lt;/span&gt;
maxmemory &amp;lt;bytes&amp;gt;

&lt;span class="c1"&gt;# MAXMEMORY POLICY: how Redis will select what to remove when maxmemory&lt;/span&gt;
&lt;span class="c1"&gt;# is reached. You can select one from the following behaviors:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# volatile-lru -&amp;gt; Evict using approximated LRU, only keys with an expire set.&lt;/span&gt;
&lt;span class="c1"&gt;# allkeys-lru -&amp;gt; Evict any key using approximated LRU.&lt;/span&gt;
&lt;span class="c1"&gt;# volatile-lfu -&amp;gt; Evict using approximated LFU, only keys with an expire set.&lt;/span&gt;
&lt;span class="c1"&gt;# allkeys-lfu -&amp;gt; Evict any key using approximated LFU.&lt;/span&gt;
&lt;span class="c1"&gt;# volatile-random -&amp;gt; Remove a random key having an expire set.&lt;/span&gt;
&lt;span class="c1"&gt;# allkeys-random -&amp;gt; Remove a random key, any key.&lt;/span&gt;
&lt;span class="c1"&gt;# volatile-ttl -&amp;gt; Remove the key with the nearest expire time (minor TTL)&lt;/span&gt;
&lt;span class="c1"&gt;# noeviction -&amp;gt; Don&amp;#39;t evict anything, just return an error on write operations.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# LRU means Least Recently Used&lt;/span&gt;
&lt;span class="c1"&gt;# LFU means Least Frequently Used&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Both LRU, LFU and volatile-ttl are implemented using approximated&lt;/span&gt;
&lt;span class="c1"&gt;# randomized algorithms.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Note: with any of the above policies, Redis will return an error on write&lt;/span&gt;
&lt;span class="c1"&gt;#       operations, when there are no suitable keys for eviction.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#       At the date of writing these commands are: set setnx setex append&lt;/span&gt;
&lt;span class="c1"&gt;#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd&lt;/span&gt;
&lt;span class="c1"&gt;#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby&lt;/span&gt;
&lt;span class="c1"&gt;#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby&lt;/span&gt;
&lt;span class="c1"&gt;#       getset mset msetnx exec sort&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The default is:&lt;/span&gt;
&lt;span class="c1"&gt;# 内存达到上限的处理策略&lt;/span&gt;
maxmemory-policy noeviction

&lt;span class="c1"&gt;# LRU, LFU and minimal TTL algorithms are not precise algorithms but approximated&lt;/span&gt;
&lt;span class="c1"&gt;# algorithms (in order to save memory), so you can tune it for speed or&lt;/span&gt;
&lt;span class="c1"&gt;# accuracy. By default Redis will check five keys and pick the one that was&lt;/span&gt;
&lt;span class="c1"&gt;# used least recently, you can change the sample size using the following&lt;/span&gt;
&lt;span class="c1"&gt;# configuration directive.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The default of 5 produces good enough results. 10 Approximates very closely&lt;/span&gt;
&lt;span class="c1"&gt;# true LRU but costs more CPU. 3 is faster but not very accurate.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# maxmemory-samples 5&lt;/span&gt;

&lt;span class="c1"&gt;# Starting from Redis 5, by default a replica will ignore its maxmemory setting&lt;/span&gt;
&lt;span class="c1"&gt;# (unless it is promoted to master after a failover or manually). It means&lt;/span&gt;
&lt;span class="c1"&gt;# that the eviction of keys will be just handled by the master, sending the&lt;/span&gt;
&lt;span class="c1"&gt;# DEL commands to the replica as keys evict in the master side.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This behavior ensures that masters and replicas stay consistent, and is usually&lt;/span&gt;
&lt;span class="c1"&gt;# what you want, however if your replica is writable, or you want the replica&lt;/span&gt;
&lt;span class="c1"&gt;# to have a different memory setting, and you are sure all the writes performed&lt;/span&gt;
&lt;span class="c1"&gt;# to the replica are idempotent, then you may change this default (but be sure&lt;/span&gt;
&lt;span class="c1"&gt;# to understand what you are doing).&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Note that since the replica by default does not evict, it may end using more&lt;/span&gt;
&lt;span class="c1"&gt;# memory than the one set via maxmemory (there are certain buffers that may&lt;/span&gt;
&lt;span class="c1"&gt;# be larger on the replica, or data structures may sometimes take more memory&lt;/span&gt;
&lt;span class="c1"&gt;# and so forth). So make sure you monitor your replicas and make sure they&lt;/span&gt;
&lt;span class="c1"&gt;# have enough memory to never hit a real out-of-memory condition before the&lt;/span&gt;
&lt;span class="c1"&gt;# master hits the configured maxmemory setting.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# replica-ignore-maxmemory yes&lt;/span&gt;

&lt;span class="c1"&gt;# Redis reclaims expired keys in two ways: upon access when those keys are&lt;/span&gt;
&lt;span class="c1"&gt;# found to be expired, and also in background, in what is called the&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;quot;active expire key&amp;quot;. The key space is slowly and interactively scanned&lt;/span&gt;
&lt;span class="c1"&gt;# looking for expired keys to reclaim, so that it is possible to free memory&lt;/span&gt;
&lt;span class="c1"&gt;# of keys that are expired and will never be accessed again in a short time.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The default effort of the expire cycle will try to avoid having more than&lt;/span&gt;
&lt;span class="c1"&gt;# ten percent of expired keys still in memory, and will try to avoid consuming&lt;/span&gt;
&lt;span class="c1"&gt;# more than 25% of total memory and to add latency to the system. However&lt;/span&gt;
&lt;span class="c1"&gt;# it is possible to increase the expire &amp;quot;effort&amp;quot; that is normally set to&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;quot;1&amp;quot;, to a greater value, up to the value &amp;quot;10&amp;quot;. At its maximum value the&lt;/span&gt;
&lt;span class="c1"&gt;# system will use more CPU, longer cycles (and technically may introduce&lt;/span&gt;
&lt;span class="c1"&gt;# more latency), and will tolerate less already expired keys still present&lt;/span&gt;
&lt;span class="c1"&gt;# in the system. It&amp;#39;s a tradeoff between memory, CPU and latency.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# active-expire-effort 1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:::&lt;/p&gt;
&lt;h3&gt;8.9 AOF配置&lt;/h3&gt;
&lt;p&gt;::: demo AOF配置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 是否用AOF，默认为no&lt;/span&gt;
appendonly no：

&lt;span class="c1"&gt;# 持久化文件的名字&lt;/span&gt;
appendfilename &lt;span class="s2"&gt;&amp;quot;appendonly.aof&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# 以什么策略执行一次保存&lt;/span&gt;
&lt;span class="c1"&gt;# appendfsync always , 在每次修改后都会sync，消耗性能&lt;/span&gt;
&lt;span class="c1"&gt;# appendfsync everysec , 每秒sync一次，可能会丢失1s的数据&lt;/span&gt;
appendfsync everysec
&lt;span class="c1"&gt;# appendfsync no ， 不执行sync，速度最快&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;############################## APPEND ONLY MODE ###############################&lt;/span&gt;

&lt;span class="c1"&gt;# By default Redis asynchronously dumps the dataset on disk. This mode is&lt;/span&gt;
&lt;span class="c1"&gt;# good enough in many applications, but an issue with the Redis process or&lt;/span&gt;
&lt;span class="c1"&gt;# a power outage may result into a few minutes of writes lost (depending on&lt;/span&gt;
&lt;span class="c1"&gt;# the configured save points).&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The Append Only File is an alternative persistence mode that provides&lt;/span&gt;
&lt;span class="c1"&gt;# much better durability. For instance using the default data fsync policy&lt;/span&gt;
&lt;span class="c1"&gt;# (see later in the config file) Redis can lose just one second of writes in a&lt;/span&gt;
&lt;span class="c1"&gt;# dramatic event like a server power outage, or a single write if something&lt;/span&gt;
&lt;span class="c1"&gt;# wrong with the Redis process itself happens, but the operating system is&lt;/span&gt;
&lt;span class="c1"&gt;# still running correctly.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# AOF and RDB persistence can be enabled at the same time without problems.&lt;/span&gt;
&lt;span class="c1"&gt;# If the AOF is enabled on startup Redis will load the AOF, that is the file&lt;/span&gt;
&lt;span class="c1"&gt;# with the better durability guarantees.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Please check http://redis.io/topics/persistence for more information.&lt;/span&gt;

&lt;span class="c1"&gt;# 是否用AOF默认为no&lt;/span&gt;
appendonly no

&lt;span class="c1"&gt;# The name of the append only file (default: &amp;quot;appendonly.aof&amp;quot;)&lt;/span&gt;

&lt;span class="c1"&gt;# 持久化文件的名字&lt;/span&gt;
appendfilename &lt;span class="s2"&gt;&amp;quot;appendonly.aof&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# The fsync() call tells the Operating System to actually write data on disk&lt;/span&gt;
&lt;span class="c1"&gt;# instead of waiting for more data in the output buffer. Some OS will really flush&lt;/span&gt;
&lt;span class="c1"&gt;# data on disk, some other OS will just try to do it ASAP.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Redis supports three different modes:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# no: don&amp;#39;t fsync, just let the OS flush the data when it wants. Faster.&lt;/span&gt;
&lt;span class="c1"&gt;# always: fsync after every write to the append only log. Slow, Safest.&lt;/span&gt;
&lt;span class="c1"&gt;# everysec: fsync only one time every second. Compromise.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The default is &amp;quot;everysec&amp;quot;, as that&amp;#39;s usually the right compromise between&lt;/span&gt;
&lt;span class="c1"&gt;# speed and data safety. It&amp;#39;s up to you to understand if you can relax this to&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;quot;no&amp;quot; that will let the operating system flush the output buffer when&lt;/span&gt;
&lt;span class="c1"&gt;# it wants, for better performances (but if you can live with the idea of&lt;/span&gt;
&lt;span class="c1"&gt;# some data loss consider the default persistence mode that&amp;#39;s snapshotting),&lt;/span&gt;
&lt;span class="c1"&gt;# or on the contrary, use &amp;quot;always&amp;quot; that&amp;#39;s very slow but a bit safer than&lt;/span&gt;
&lt;span class="c1"&gt;# everysec.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# More details please check the following article:&lt;/span&gt;
&lt;span class="c1"&gt;# http://antirez.com/post/redis-persistence-demystified.html&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# If unsure, use &amp;quot;everysec&amp;quot;.&lt;/span&gt;

&lt;span class="c1"&gt;# appendfsync always&lt;/span&gt;
appendfsync everysec
&lt;span class="c1"&gt;# appendfsync no&lt;/span&gt;

&lt;span class="c1"&gt;# When the AOF fsync policy is set to always or everysec, and a background&lt;/span&gt;
&lt;span class="c1"&gt;# saving process (a background save or AOF log background rewriting) is&lt;/span&gt;
&lt;span class="c1"&gt;# performing a lot of I/O against the disk, in some Linux configurations&lt;/span&gt;
&lt;span class="c1"&gt;# Redis may block too long on the fsync() call. Note that there is no fix for&lt;/span&gt;
&lt;span class="c1"&gt;# this currently, as even performing fsync in a different thread will block&lt;/span&gt;
&lt;span class="c1"&gt;# our synchronous write(2) call.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# In order to mitigate this problem it&amp;#39;s possible to use the following option&lt;/span&gt;
&lt;span class="c1"&gt;# that will prevent fsync() from being called in the main process while a&lt;/span&gt;
&lt;span class="c1"&gt;# BGSAVE or BGREWRITEAOF is in progress.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This means that while another child is saving, the durability of Redis is&lt;/span&gt;
&lt;span class="c1"&gt;# the same as &amp;quot;appendfsync none&amp;quot;. In practical terms, this means that it is&lt;/span&gt;
&lt;span class="c1"&gt;# possible to lose up to 30 seconds of log in the worst scenario (with the&lt;/span&gt;
&lt;span class="c1"&gt;# default Linux settings).&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# If you have latency problems turn this to &amp;quot;yes&amp;quot;. Otherwise leave it as&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;quot;no&amp;quot; that is the safest pick from the point of view of durability.&lt;/span&gt;

no-appendfsync-on-rewrite no

&lt;span class="c1"&gt;# Automatic rewrite of the append only file.&lt;/span&gt;
&lt;span class="c1"&gt;# Redis is able to automatically rewrite the log file implicitly calling&lt;/span&gt;
&lt;span class="c1"&gt;# BGREWRITEAOF when the AOF log size grows by the specified percentage.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This is how it works: Redis remembers the size of the AOF file after the&lt;/span&gt;
&lt;span class="c1"&gt;# latest rewrite (if no rewrite has happened since the restart, the size of&lt;/span&gt;
&lt;span class="c1"&gt;# the AOF at startup is used).&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This base size is compared to the current size. If the current size is&lt;/span&gt;
&lt;span class="c1"&gt;# bigger than the specified percentage, the rewrite is triggered. Also&lt;/span&gt;
&lt;span class="c1"&gt;# you need to specify a minimal size for the AOF file to be rewritten, this&lt;/span&gt;
&lt;span class="c1"&gt;# is useful to avoid rewriting the AOF file even if the percentage increase&lt;/span&gt;
&lt;span class="c1"&gt;# is reached but it is still pretty small.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Specify a percentage of zero in order to disable the automatic AOF&lt;/span&gt;
&lt;span class="c1"&gt;# rewrite feature.&lt;/span&gt;

auto-aof-rewrite-percentage &lt;span class="m"&gt;100&lt;/span&gt;
auto-aof-rewrite-min-size 64mb

&lt;span class="c1"&gt;# An AOF file may be found to be truncated at the end during the Redis&lt;/span&gt;
&lt;span class="c1"&gt;# startup process, when the AOF data gets loaded back into memory.&lt;/span&gt;
&lt;span class="c1"&gt;# This may happen when the system where Redis is running&lt;/span&gt;
&lt;span class="c1"&gt;# crashes, especially when an ext4 filesystem is mounted without the&lt;/span&gt;
&lt;span class="c1"&gt;# data=ordered option (however this can&amp;#39;t happen when Redis itself&lt;/span&gt;
&lt;span class="c1"&gt;# crashes or aborts but the operating system still works correctly).&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Redis can either exit with an error when this happens, or load as much&lt;/span&gt;
&lt;span class="c1"&gt;# data as possible (the default now) and start if the AOF file is found&lt;/span&gt;
&lt;span class="c1"&gt;# to be truncated at the end. The following option controls this behavior.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# If aof-load-truncated is set to yes, a truncated AOF file is loaded and&lt;/span&gt;
&lt;span class="c1"&gt;# the Redis server starts emitting a log to inform the user of the event.&lt;/span&gt;
&lt;span class="c1"&gt;# Otherwise if the option is set to no, the server aborts with an error&lt;/span&gt;
&lt;span class="c1"&gt;# and refuses to start. When the option is set to no, the user requires&lt;/span&gt;
&lt;span class="c1"&gt;# to fix the AOF file using the &amp;quot;redis-check-aof&amp;quot; utility before to restart&lt;/span&gt;
&lt;span class="c1"&gt;# the server.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Note that if the AOF file will be found to be corrupted in the middle&lt;/span&gt;
&lt;span class="c1"&gt;# the server will still exit with an error. This option only applies when&lt;/span&gt;
&lt;span class="c1"&gt;# Redis will try to read more data from the AOF file but not enough bytes&lt;/span&gt;
&lt;span class="c1"&gt;# will be found.&lt;/span&gt;
aof-load-truncated yes

&lt;span class="c1"&gt;# When rewriting the AOF file, Redis is able to use an RDB preamble in the&lt;/span&gt;
&lt;span class="c1"&gt;# AOF file for faster rewrites and recoveries. When this option is turned&lt;/span&gt;
&lt;span class="c1"&gt;# on the rewritten AOF file is composed of two different stanzas:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#   [RDB file][AOF tail]&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# When loading, Redis recognizes that the AOF file starts with the &amp;quot;REDIS&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# string and loads the prefixed RDB file, then continues loading the AOF&lt;/span&gt;
&lt;span class="c1"&gt;# tail.&lt;/span&gt;
aof-use-rdb-preamble yes
&lt;/pre&gt;&lt;/div&gt;

&lt;pre&gt;&lt;code&gt;



################################ LUA SCRIPTING  ###############################

# Max execution time of a Lua script in milliseconds.
#
# If the maximum execution time is reached Redis will log that a script is
# still in execution after the maximum allowed time and will start to
# reply to queries with an error.
#
# When a long running script exceeds the maximum execution time only the
# SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be
# used to stop a script that did not yet call any write commands. The second
# is the only way to shut down the server in the case a write command was
# already issued by the script but the user doesn't want to wait for the natural
# termination of the script.
#
# Set it to 0 or a negative value for unlimited execution without warnings.
lua-time-limit 5000

################################ REDIS CLUSTER  ###############################

# Normal Redis instances can't be part of a Redis Cluster; only nodes that are
# started as cluster nodes can. In order to start a Redis instance as a
# cluster node enable the cluster support uncommenting the following:
#
# cluster-enabled yes

# Every cluster node has a cluster configuration file. This file is not
# intended to be edited by hand. It is created and updated by Redis nodes.
# Every Redis Cluster node requires a different cluster configuration file.
# Make sure that instances running in the same system do not have
# overlapping cluster configuration file names.
#
# cluster-config-file nodes-6379.conf

# Cluster node timeout is the amount of milliseconds a node must be unreachable
# for it to be considered in failure state.
# Most other internal time limits are a multiple of the node timeout.
#
# cluster-node-timeout 15000

# A replica of a failing master will avoid to start a failover if its data
# looks too old.
#
# There is no simple way for a replica to actually have an exact measure of
# its "data age", so the following two checks are performed:
#
# 1) If there are multiple replicas able to failover, they exchange messages
#    in order to try to give an advantage to the replica with the best
#    replication offset (more data from the master processed).
#    Replicas will try to get their rank by offset, and apply to the start
#    of the failover a delay proportional to their rank.
#
# 2) Every single replica computes the time of the last interaction with
#    its master. This can be the last ping or command received (if the master
#    is still in the "connected" state), or the time that elapsed since the
#    disconnection with the master (if the replication link is currently down).
#    If the last interaction is too old, the replica will not try to failover
#    at all.
#
# The point "2" can be tuned by user. Specifically a replica will not perform
# the failover if, since the last interaction with the master, the time
# elapsed is greater than:
#
#   (node-timeout * cluster-replica-validity-factor) + repl-ping-replica-period
#
# So for example if node-timeout is 30 seconds, and the cluster-replica-validity-factor
# is 10, and assuming a default repl-ping-replica-period of 10 seconds, the
# replica will not try to failover if it was not able to talk with the master
# for longer than 310 seconds.
#
# A large cluster-replica-validity-factor may allow replicas with too old data to failover
# a master, while a too small value may prevent the cluster from being able to
# elect a replica at all.
#
# For maximum availability, it is possible to set the cluster-replica-validity-factor
# to a value of 0, which means, that replicas will always try to failover the
# master regardless of the last time they interacted with the master.
# (However they'll always try to apply a delay proportional to their
# offset rank).
#
# Zero is the only value able to guarantee that when all the partitions heal
# the cluster will always be able to continue.
#
# cluster-replica-validity-factor 10

# Cluster replicas are able to migrate to orphaned masters, that are masters
# that are left without working replicas. This improves the cluster ability
# to resist to failures as otherwise an orphaned master can't be failed over
# in case of failure if it has no working replicas.
#
# Replicas migrate to orphaned masters only if there are still at least a
# given number of other working replicas for their old master. This number
# is the "migration barrier". A migration barrier of 1 means that a replica
# will migrate only if there is at least 1 other working replica for its master
# and so forth. It usually reflects the number of replicas you want for every
# master in your cluster.
#
# Default is 1 (replicas migrate only if their masters remain with at least
# one replica). To disable migration just set it to a very large value.
# A value of 0 can be set but is useful only for debugging and dangerous
# in production.
#
# cluster-migration-barrier 1

# By default Redis Cluster nodes stop accepting queries if they detect there
# is at least a hash slot uncovered (no available node is serving it).
# This way if the cluster is partially down (for example a range of hash slots
# are no longer covered) all the cluster becomes, eventually, unavailable.
# It automatically returns available as soon as all the slots are covered again.
#
# However sometimes you want the subset of the cluster which is working,
# to continue to accept queries for the part of the key space that is still
# covered. In order to do so, just set the cluster-require-full-coverage
# option to no.
#
# cluster-require-full-coverage yes

# This option, when set to yes, prevents replicas from trying to failover its
# master during master failures. However the master can still perform a
# manual failover, if forced to do so.
#
# This is useful in different scenarios, especially in the case of multiple
# data center operations, where we want one side to never be promoted if not
# in the case of a total DC failure.
#
# cluster-replica-no-failover no

# This option, when set to yes, allows nodes to serve read traffic while the
# the cluster is in a down state, as long as it believes it owns the slots. 
#
# This is useful for two cases.  The first case is for when an application 
# doesn't require consistency of data during node failures or network partitions.
# One example of this is a cache, where as long as the node has the data it
# should be able to serve it. 
#
# The second use case is for configurations that don't meet the recommended  
# three shards but want to enable cluster mode and scale later. A 
# master outage in a 1 or 2 shard configuration causes a read/write outage to the
# entire cluster without this option set, with it set there is only a write outage.
# Without a quorum of masters, slot ownership will not change automatically. 
#
# cluster-allow-reads-when-down no

# In order to setup your cluster make sure to read the documentation
# available at http://redis.io web site.

########################## CLUSTER DOCKER/NAT support  ########################

# In certain deployments, Redis Cluster nodes address discovery fails, because
# addresses are NAT-ted or because ports are forwarded (the typical case is
# Docker and other containers).
#
# In order to make Redis Cluster working in such environments, a static
# configuration where each node knows its public address is needed. The
# following two options are used for this scope, and are:
#
# * cluster-announce-ip
# * cluster-announce-port
# * cluster-announce-bus-port
#
# Each instructs the node about its address, client port, and cluster message
# bus port. The information is then published in the header of the bus packets
# so that other nodes will be able to correctly map the address of the node
# publishing the information.
#
# If the above options are not used, the normal Redis Cluster auto-detection
# will be used instead.
#
# Note that when remapped, the bus port may not be at the fixed offset of
# clients port + 10000, so you can specify any port and bus-port depending
# on how they get remapped. If the bus-port is not set, a fixed offset of
# 10000 will be used as usual.
#
# Example:
#
# cluster-announce-ip 10.1.1.5
# cluster-announce-port 6379
# cluster-announce-bus-port 6380

################################## SLOW LOG ###################################

# The Redis Slow Log is a system to log queries that exceeded a specified
# execution time. The execution time does not include the I/O operations
# like talking with the client, sending the reply and so forth,
# but just the time needed to actually execute the command (this is the only
# stage of command execution where the thread is blocked and can not serve
# other requests in the meantime).
#
# You can configure the slow log with two parameters: one tells Redis
# what is the execution time, in microseconds, to exceed in order for the
# command to get logged, and the other parameter is the length of the
# slow log. When a new command is logged the oldest one is removed from the
# queue of logged commands.

# The following time is expressed in microseconds, so 1000000 is equivalent
# to one second. Note that a negative number disables the slow log, while
# a value of zero forces the logging of every command.
slowlog-log-slower-than 10000

# There is no limit to this length. Just be aware that it will consume memory.
# You can reclaim memory used by the slow log with SLOWLOG RESET.
slowlog-max-len 128

################################ LATENCY MONITOR ##############################

# The Redis latency monitoring subsystem samples different operations
# at runtime in order to collect data related to possible sources of
# latency of a Redis instance.
#
# Via the LATENCY command this information is available to the user that can
# print graphs and obtain reports.
#
# The system only logs operations that were performed in a time equal or
# greater than the amount of milliseconds specified via the
# latency-monitor-threshold configuration directive. When its value is set
# to zero, the latency monitor is turned off.
#
# By default latency monitoring is disabled since it is mostly not needed
# if you don't have latency issues, and collecting data has a performance
# impact, that while very small, can be measured under big load. Latency
# monitoring can easily be enabled at runtime using the command
# "CONFIG SET latency-monitor-threshold &amp;lt;milliseconds&amp;gt;" if needed.
latency-monitor-threshold 0

############################# EVENT NOTIFICATION ##############################

# Redis can notify Pub/Sub clients about events happening in the key space.
# This feature is documented at http://redis.io/topics/notifications
#
# For instance if keyspace events notification is enabled, and a client
# performs a DEL operation on key "foo" stored in the Database 0, two
# messages will be published via Pub/Sub:
#
# PUBLISH __keyspace@0__:foo del
# PUBLISH __keyevent@0__:del foo
#
# It is possible to select the events that Redis will notify among a set
# of classes. Every class is identified by a single character:
#
#  K     Keyspace events, published with __keyspace@&amp;lt;db&amp;gt;__ prefix.
#  E     Keyevent events, published with __keyevent@&amp;lt;db&amp;gt;__ prefix.
#  g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...
#  $     String commands
#  l     List commands
#  s     Set commands
#  h     Hash commands
#  z     Sorted set commands
#  x     Expired events (events generated every time a key expires)
#  e     Evicted events (events generated when a key is evicted for maxmemory)
#  t     Stream commands
#  m     Key-miss events (Note: It is not included in the 'A' class)
#  A     Alias for g$lshzxet, so that the "AKE" string means all the events
#        (Except key-miss events which are excluded from 'A' due to their
#         unique nature).
#
#  The "notify-keyspace-events" takes as argument a string that is composed
#  of zero or multiple characters. The empty string means that notifications
#  are disabled.
#
#  Example: to enable list and generic events, from the point of view of the
#           event name, use:
#
#  notify-keyspace-events Elg
#
#  Example 2: to get the stream of the expired keys subscribing to channel
#             name __keyevent@0__:expired use:
#
#  notify-keyspace-events Ex
#
#  By default all notifications are disabled because most users don't need
#  this feature and the feature has some overhead. Note that if you don't
#  specify at least one of K or E, no events will be delivered.
notify-keyspace-events ""

############################### GOPHER SERVER #################################

# Redis contains an implementation of the Gopher protocol, as specified in
# the RFC 1436 (https://www.ietf.org/rfc/rfc1436.txt).
#
# The Gopher protocol was very popular in the late '90s. It is an alternative
# to the web, and the implementation both server and client side is so simple
# that the Redis server has just 100 lines of code in order to implement this
# support.
#
# What do you do with Gopher nowadays? Well Gopher never *really* died, and
# lately there is a movement in order for the Gopher more hierarchical content
# composed of just plain text documents to be resurrected. Some want a simpler
# internet, others believe that the mainstream internet became too much
# controlled, and it's cool to create an alternative space for people that
# want a bit of fresh air.
#
# Anyway for the 10nth birthday of the Redis, we gave it the Gopher protocol
# as a gift.
#
# --- HOW IT WORKS? ---
#
# The Redis Gopher support uses the inline protocol of Redis, and specifically
# two kind of inline requests that were anyway illegal: an empty request
# or any request that starts with "/" (there are no Redis commands starting
# with such a slash). Normal RESP2/RESP3 requests are completely out of the
# path of the Gopher protocol implementation and are served as usual as well.
#
# If you open a connection to Redis when Gopher is enabled and send it
# a string like "/foo", if there is a key named "/foo" it is served via the
# Gopher protocol.
#
# In order to create a real Gopher "hole" (the name of a Gopher site in Gopher
# talking), you likely need a script like the following:
#
#   https://github.com/antirez/gopher2redis
#
# --- SECURITY WARNING ---
#
# If you plan to put Redis on the internet in a publicly accessible address
# to server Gopher pages MAKE SURE TO SET A PASSWORD to the instance.
# Once a password is set:
#
#   1. The Gopher server (when enabled, not by default) will still serve
#      content via Gopher.
#   2. However other commands cannot be called before the client will
#      authenticate.
#
# So use the 'requirepass' option to protect your instance.
#
# Note that Gopher is not currently supported when 'io-threads-do-reads'
# is enabled.
#
# To enable Gopher support, uncomment the following line and set the option
# from no (the default) to yes.
#
# gopher-enabled no

############################### ADVANCED CONFIG ###############################

# Hashes are encoded using a memory efficient data structure when they have a
# small number of entries, and the biggest entry does not exceed a given
# threshold. These thresholds can be configured using the following directives.
hash-max-ziplist-entries 512
hash-max-ziplist-value 64

# Lists are also encoded in a special way to save a lot of space.
# The number of entries allowed per internal list node can be specified
# as a fixed maximum size or a maximum number of elements.
# For a fixed maximum size, use -5 through -1, meaning:
# -5: max size: 64 Kb  &amp;lt;-- not recommended for normal workloads
# -4: max size: 32 Kb  &amp;lt;-- not recommended
# -3: max size: 16 Kb  &amp;lt;-- probably not recommended
# -2: max size: 8 Kb   &amp;lt;-- good
# -1: max size: 4 Kb   &amp;lt;-- good
# Positive numbers mean store up to _exactly_ that number of elements
# per list node.
# The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),
# but if your use case is unique, adjust the settings as necessary.
list-max-ziplist-size -2

# Lists may also be compressed.
# Compress depth is the number of quicklist ziplist nodes from *each* side of
# the list to *exclude* from compression.  The head and tail of the list
# are always uncompressed for fast push/pop operations.  Settings are:
# 0: disable all list compression
# 1: depth 1 means "don't start compressing until after 1 node into the list,
#    going from either the head or tail"
#    So: [head]-&amp;gt;node-&amp;gt;node-&amp;gt;...-&amp;gt;node-&amp;gt;[tail]
#    [head], [tail] will always be uncompressed; inner nodes will compress.
# 2: [head]-&amp;gt;[next]-&amp;gt;node-&amp;gt;node-&amp;gt;...-&amp;gt;node-&amp;gt;[prev]-&amp;gt;[tail]
#    2 here means: don't compress head or head-&amp;gt;next or tail-&amp;gt;prev or tail,
#    but compress all nodes between them.
# 3: [head]-&amp;gt;[next]-&amp;gt;[next]-&amp;gt;node-&amp;gt;node-&amp;gt;...-&amp;gt;node-&amp;gt;[prev]-&amp;gt;[prev]-&amp;gt;[tail]
# etc.
list-compress-depth 0

# Sets have a special encoding in just one case: when a set is composed
# of just strings that happen to be integers in radix 10 in the range
# of 64 bit signed integers.
# The following configuration setting sets the limit in the size of the
# set in order to use this special memory saving encoding.
set-max-intset-entries 512

# Similarly to hashes and lists, sorted sets are also specially encoded in
# order to save a lot of space. This encoding is only used when the length and
# elements of a sorted set are below the following limits:
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

# HyperLogLog sparse representation bytes limit. The limit includes the
# 16 bytes header. When an HyperLogLog using the sparse representation crosses
# this limit, it is converted into the dense representation.
#
# A value greater than 16000 is totally useless, since at that point the
# dense representation is more memory efficient.
#
# The suggested value is ~ 3000 in order to have the benefits of
# the space efficient encoding without slowing down too much PFADD,
# which is O(N) with the sparse encoding. The value can be raised to
# ~ 10000 when CPU is not a concern, but space is, and the data set is
# composed of many HyperLogLogs with cardinality in the 0 - 15000 range.
hll-sparse-max-bytes 3000

# Streams macro node max size / items. The stream data structure is a radix
# tree of big nodes that encode multiple items inside. Using this configuration
# it is possible to configure how big a single node can be in bytes, and the
# maximum number of items it may contain before switching to a new node when
# appending new stream entries. If any of the following settings are set to
# zero, the limit is ignored, so for instance it is possible to set just a
# max entires limit by setting max-bytes to 0 and max-entries to the desired
# value.
stream-node-max-bytes 4096
stream-node-max-entries 100

# Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in
# order to help rehashing the main Redis hash table (the one mapping top-level
# keys to values). The hash table implementation Redis uses (see dict.c)
# performs a lazy rehashing: the more operation you run into a hash table
# that is rehashing, the more rehashing "steps" are performed, so if the
# server is idle the rehashing is never complete and some more memory is used
# by the hash table.
#
# The default is to use this millisecond 10 times every second in order to
# actively rehash the main dictionaries, freeing memory when possible.
#
# If unsure:
# use "activerehashing no" if you have hard latency requirements and it is
# not a good thing in your environment that Redis can reply from time to time
# to queries with 2 milliseconds delay.
#
# use "activerehashing yes" if you don't have such hard requirements but
# want to free memory asap when possible.
activerehashing yes

# The client output buffer limits can be used to force disconnection of clients
# that are not reading data from the server fast enough for some reason (a
# common reason is that a Pub/Sub client can't consume messages as fast as the
# publisher can produce them).
#
# The limit can be set differently for the three different classes of clients:
#
# normal -&amp;gt; normal clients including MONITOR clients
# replica  -&amp;gt; replica clients
# pubsub -&amp;gt; clients subscribed to at least one pubsub channel or pattern
#
# The syntax of every client-output-buffer-limit directive is the following:
#
# client-output-buffer-limit &amp;lt;class&amp;gt; &amp;lt;hard limit&amp;gt; &amp;lt;soft limit&amp;gt; &amp;lt;soft seconds&amp;gt;
#
# A client is immediately disconnected once the hard limit is reached, or if
# the soft limit is reached and remains reached for the specified number of
# seconds (continuously).
# So for instance if the hard limit is 32 megabytes and the soft limit is
# 16 megabytes / 10 seconds, the client will get disconnected immediately
# if the size of the output buffers reach 32 megabytes, but will also get
# disconnected if the client reaches 16 megabytes and continuously overcomes
# the limit for 10 seconds.
#
# By default normal clients are not limited because they don't receive data
# without asking (in a push way), but just after a request, so only
# asynchronous clients may create a scenario where data is requested faster
# than it can read.
#
# Instead there is a default limit for pubsub and replica clients, since
# subscribers and replicas receive data in a push fashion.
#
# Both the hard or the soft limit can be disabled by setting them to zero.
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit replica 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60

# Client query buffers accumulate new commands. They are limited to a fixed
# amount by default in order to avoid that a protocol desynchronization (for
# instance due to a bug in the client) will lead to unbound memory usage in
# the query buffer. However you can configure it here if you have very special
# needs, such us huge multi/exec requests or alike.
#
# client-query-buffer-limit 1gb

# In the Redis protocol, bulk requests, that are, elements representing single
# strings, are normally limited to 512 mb. However you can change this limit
# here, but must be 1mb or greater
#
# proto-max-bulk-len 512mb

# Redis calls an internal function to perform many background tasks, like
# closing connections of clients in timeout, purging expired keys that are
# never requested, and so forth.
#
# Not all tasks are performed with the same frequency, but Redis checks for
# tasks to perform according to the specified "hz" value.
#
# By default "hz" is set to 10. Raising the value will use more CPU when
# Redis is idle, but at the same time will make Redis more responsive when
# there are many keys expiring at the same time, and timeouts may be
# handled with more precision.
#
# The range is between 1 and 500, however a value over 100 is usually not
# a good idea. Most users should use the default of 10 and raise this up to
# 100 only in environments where very low latency is required.
hz 10

# Normally it is useful to have an HZ value which is proportional to the
# number of clients connected. This is useful in order, for instance, to
# avoid too many clients are processed for each background task invocation
# in order to avoid latency spikes.
#
# Since the default HZ value by default is conservatively set to 10, Redis
# offers, and enables by default, the ability to use an adaptive HZ value
# which will temporarily raise when there are many connected clients.
#
# When dynamic HZ is enabled, the actual configured HZ will be used
# as a baseline, but multiples of the configured HZ value will be actually
# used as needed once more clients are connected. In this way an idle
# instance will use very little CPU time while a busy instance will be
# more responsive.
dynamic-hz yes

# When a child rewrites the AOF file, if the following option is enabled
# the file will be fsync-ed every 32 MB of data generated. This is useful
# in order to commit the file to the disk more incrementally and avoid
# big latency spikes.
aof-rewrite-incremental-fsync yes

# When redis saves RDB file, if the following option is enabled
# the file will be fsync-ed every 32 MB of data generated. This is useful
# in order to commit the file to the disk more incrementally and avoid
# big latency spikes.
rdb-save-incremental-fsync yes

# Redis LFU eviction (see maxmemory setting) can be tuned. However it is a good
# idea to start with the default settings and only change them after investigating
# how to improve the performances and how the keys LFU change over time, which
# is possible to inspect via the OBJECT FREQ command.
#
# There are two tunable parameters in the Redis LFU implementation: the
# counter logarithm factor and the counter decay time. It is important to
# understand what the two parameters mean before changing them.
#
# The LFU counter is just 8 bits per key, it's maximum value is 255, so Redis
# uses a probabilistic increment with logarithmic behavior. Given the value
# of the old counter, when a key is accessed, the counter is incremented in
# this way:
#
# 1. A random number R between 0 and 1 is extracted.
# 2. A probability P is calculated as 1/(old_value*lfu_log_factor+1).
# 3. The counter is incremented only if R &amp;lt; P.
#
# The default lfu-log-factor is 10. This is a table of how the frequency
# counter changes with a different number of accesses with different
# logarithmic factors:
#
# +--------+------------+------------+------------+------------+------------+
# | factor | 100 hits   | 1000 hits  | 100K hits  | 1M hits    | 10M hits   |
# +--------+------------+------------+------------+------------+------------+
# | 0      | 104        | 255        | 255        | 255        | 255        |
# +--------+------------+------------+------------+------------+------------+
# | 1      | 18         | 49         | 255        | 255        | 255        |
# +--------+------------+------------+------------+------------+------------+
# | 10     | 10         | 18         | 142        | 255        | 255        |
# +--------+------------+------------+------------+------------+------------+
# | 100    | 8          | 11         | 49         | 143        | 255        |
# +--------+------------+------------+------------+------------+------------+
#
# NOTE: The above table was obtained by running the following commands:
#
#   redis-benchmark -n 1000000 incr foo
#   redis-cli object freq foo
#
# NOTE 2: The counter initial value is 5 in order to give new objects a chance
# to accumulate hits.
#
# The counter decay time is the time, in minutes, that must elapse in order
# for the key counter to be divided by two (or decremented if it has a value
# less &amp;lt;= 10).
#
# The default value for the lfu-decay-time is 1. A special value of 0 means to
# decay the counter every time it happens to be scanned.
#
# lfu-log-factor 10
# lfu-decay-time 1

########################### ACTIVE DEFRAGMENTATION #######################
#
# What is active defragmentation?
# -------------------------------
#
# Active (online) defragmentation allows a Redis server to compact the
# spaces left between small allocations and deallocations of data in memory,
# thus allowing to reclaim back memory.
#
# Fragmentation is a natural process that happens with every allocator (but
# less so with Jemalloc, fortunately) and certain workloads. Normally a server
# restart is needed in order to lower the fragmentation, or at least to flush
# away all the data and create it again. However thanks to this feature
# implemented by Oran Agra for Redis 4.0 this process can happen at runtime
# in a "hot" way, while the server is running.
#
# Basically when the fragmentation is over a certain level (see the
# configuration options below) Redis will start to create new copies of the
# values in contiguous memory regions by exploiting certain specific Jemalloc
# features (in order to understand if an allocation is causing fragmentation
# and to allocate it in a better place), and at the same time, will release the
# old copies of the data. This process, repeated incrementally for all the keys
# will cause the fragmentation to drop back to normal values.
#
# Important things to understand:
#
# 1. This feature is disabled by default, and only works if you compiled Redis
#    to use the copy of Jemalloc we ship with the source code of Redis.
#    This is the default with Linux builds.
#
# 2. You never need to enable this feature if you don't have fragmentation
#    issues.
#
# 3. Once you experience fragmentation, you can enable this feature when
#    needed with the command "CONFIG SET activedefrag yes".
#
# The configuration parameters are able to fine tune the behavior of the
# defragmentation process. If you are not sure about what they mean it is
# a good idea to leave the defaults untouched.

# Enabled active defragmentation
# activedefrag no

# Minimum amount of fragmentation waste to start active defrag
# active-defrag-ignore-bytes 100mb

# Minimum percentage of fragmentation to start active defrag
# active-defrag-threshold-lower 10

# Maximum percentage of fragmentation at which we use maximum effort
# active-defrag-threshold-upper 100

# Minimal effort for defrag in CPU percentage, to be used when the lower
# threshold is reached
# active-defrag-cycle-min 1

# Maximal effort for defrag in CPU percentage, to be used when the upper
# threshold is reached
# active-defrag-cycle-max 25

# Maximum number of set/hash/zset/list fields that will be processed from
# the main dictionary scan
# active-defrag-max-scan-fields 1000

# Jemalloc background thread for purging will be enabled by default
jemalloc-bg-thread yes

# It is possible to pin different threads and processes of Redis to specific
# CPUs in your system, in order to maximize the performances of the server.
# This is useful both in order to pin different Redis threads in different
# CPUs, but also in order to make sure that multiple Redis instances running
# in the same host will be pinned to different CPUs.
#
# Normally you can do this using the "taskset" command, however it is also
# possible to this via Redis configuration directly, both in Linux and FreeBSD.
#
# You can pin the server/IO threads, bio threads, aof rewrite child process, and
# the bgsave child process. The syntax to specify the cpu list is the same as
# the taskset command:
#
# Set redis server/io threads to cpu affinity 0,2,4,6:
# server_cpulist 0-7:2
#
# Set bio threads to cpu affinity 1,3:
# bio_cpulist 1,3
#
# Set aof rewrite child process to cpu affinity 8,9,10,11:
# aof_rewrite_cpulist 8-11
#
# Set bgsave child process to cpu affinity 1,10,11
# bgsave_cpulist 1,10-11&lt;/code&gt;&lt;/pre&gt;
</description><author>2826708201@qq.com (LifeAlsoIsGG)</author><guid isPermaLink="true">/archives/Redis部署与基本使用/</guid><pubDate>Sat, 21 Nov 2020 15:17:13 +0806</pubDate></item><item><title>Redis实现高并发秒杀系统</title><link>/archives/Redis实现高并发秒杀系统/</link><description>&lt;p&gt;Redis实现Redis实现高并发秒杀系统&lt;/p&gt;
</description><author>2826708201@qq.com (LifeAlsoIsGG)</author><guid isPermaLink="true">/archives/Redis实现高并发秒杀系统/</guid><pubDate>Mon, 30 Nov 2020 15:08:10 +0806</pubDate></item></channel></rss>